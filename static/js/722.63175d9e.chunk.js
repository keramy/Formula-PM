"use strict";(self.webpackChunkformula_project_app=self.webpackChunkformula_project_app||[]).push([[269,722],{21722:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});r(65043);var o=r(53969),a=r(52269),l=r(66866),s=r(70579);const n=e=>{let{task:t=null,projects:r,teamMembers:n,onSubmit:i,onCancel:d,isEdit:c=!1}=e;const x=c?"Edit Task":"Add New Task",p=c?"edit-task":"add-task",h=c&&t?{taskId:t.id,taskName:t.name,projectId:t.projectId,status:t.status,priority:t.priority}:{};return(0,s.jsx)(l.A,{pageType:p,pageTitle:x,pageData:h,subtitle:c?"Editing: ".concat(null===t||void 0===t?void 0:t.name):"Create a new task",onNavigate:e=>{"/tasks"===e&&d&&d()},contentPadding:3,children:(0,s.jsx)(o.A,{sx:{maxWidth:800,mx:"auto",backgroundColor:"white",borderRadius:3,border:"1px solid #E9ECEF",p:4},children:(0,s.jsx)(a.default,{projects:r,teamMembers:n,onSubmit:i,onCancel:d,initialTask:t})})})}},51087:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(99992),a=r(70579);const l=(0,o.A)((0,a.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext")},52269:(e,t,r)=>{r.r(t),r.d(t,{default:()=>q});var o=r(89379),a=r(65043),l=r(53969),s=r(56803),n=r(24343),i=r(47471),d=r(33539),c=r(41859),x=r(53541),p=r(24793),h=r(5984),u=r(94799),m=r(55895),g=r(26020),j=r(95315),A=r(57401),f=r(79801),b=r(66185),C=r(52912),v=r(42579),y=r(38517),D=r(81911),k=r(78776),w=r(85877),E=r(20312),S=r(74917),F=r(47951),T=r(95512),I=r(51697),z=r(82058),B=r(3665),M=r(37305),P=r(5362),W=r(70579);const L={image:{icon:(0,W.jsx)(E.A,{}),color:"#4caf50",types:["jpg","jpeg","png","gif","bmp","webp"]},pdf:{icon:(0,W.jsx)(S.A,{}),color:"#f44336",types:["pdf"]},document:{icon:(0,W.jsx)(F.A,{}),color:"#2196f3",types:["doc","docx","txt","rtf"]},default:{icon:(0,W.jsx)(T.A,{}),color:"#9e9e9e",types:[]}};const N=function(e){let{taskId:t,projectId:r,files:n=[],onFilesChange:i,maxFiles:d=10,maxSize:x=10}=e;const[p,h]=(0,a.useState)(!1),[E,S]=(0,a.useState)(!1),[F,T]=(0,a.useState)(null),[N,R]=(0,a.useState)(""),q=(0,a.useRef)(null),_=e=>{const t=e.split(".").pop().toLowerCase();for(const[r,a]of Object.entries(L))if(a.types.includes(t))return(0,o.A)((0,o.A)({},a),{},{extension:t});return(0,o.A)((0,o.A)({},L.default),{},{extension:t})},O=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},U=e=>e.size>1024*x*1024?"File size must be less than ".concat(x,"MB"):n.length>=d?"Maximum ".concat(d," files allowed"):n.some((t=>t.name===e.name))?"File with this name already exists":null,H=e=>{const o=Array.from(e),a=[];let l="";for(const t of o){const e=U(t);if(e){l=e;break}a.push(t)}if(l)return R(l),void setTimeout((()=>R("")),5e3);S(!0),setTimeout((()=>{const e=a.map((e=>({id:Date.now()+Math.random(),name:e.name,size:e.size,type:e.type,uploadDate:(new Date).toISOString(),taskId:t,projectId:r,url:URL.createObjectURL(e),file:e})));i([...n,...e]),S(!1),R("")}),1500)},G=e=>{const t=document.createElement("a");t.href=e.url,t.download=e.name,document.body.appendChild(t),t.click(),document.body.removeChild(t)};return(0,W.jsxs)(l.A,{children:[N&&(0,W.jsx)(s.A,{severity:"error",sx:{mb:2},children:N}),(0,W.jsxs)(u.A,{sx:{p:3,mb:3,border:"2px dashed ".concat(p?"#37444B":"#C0B19E"),backgroundColor:p?"#F1EEEA":"transparent",cursor:"pointer",transition:"all 0.3s ease",textAlign:"center"},onDrop:e=>{e.preventDefault(),h(!1);const t=e.dataTransfer.files;t.length>0&&H(t)},onDragOver:e=>{e.preventDefault(),h(!0)},onDragLeave:e=>{e.preventDefault(),h(!1)},onClick:()=>{var e;return null===(e=q.current)||void 0===e?void 0:e.click()},children:[(0,W.jsx)(I.A,{sx:{fontSize:48,color:"#C0B19E",mb:2}}),(0,W.jsx)(m.A,{variant:"h6",gutterBottom:!0,children:"Drop files here or click to browse"}),(0,W.jsx)(m.A,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Supports: Images, PDFs, Documents"}),(0,W.jsxs)(m.A,{variant:"caption",color:"text.secondary",children:["Max ",d," files, ",x,"MB each"]}),(0,W.jsx)("input",{ref:q,type:"file",multiple:!0,style:{display:"none"},onChange:e=>{e.target.files.length>0&&H(e.target.files)},accept:"image/*,.pdf,.doc,.docx,.txt"})]}),E&&(0,W.jsxs)(l.A,{sx:{mb:3},children:[(0,W.jsx)(m.A,{variant:"body2",gutterBottom:!0,children:"Uploading files..."}),(0,W.jsx)(g.A,{})]}),n.length>0&&(0,W.jsxs)(u.A,{sx:{p:2},children:[(0,W.jsxs)(m.A,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,W.jsx)(z.A,{}),"Attached Files (",n.length,")"]}),(0,W.jsx)(j.A,{children:n.map((e=>{const t=_(e.name);return(0,W.jsxs)(A.Ay,{sx:{border:1,borderColor:"divider",borderRadius:2,mb:1,backgroundColor:"background.paper"},children:[(0,W.jsx)(f.A,{children:(0,W.jsx)(l.A,{sx:{color:t.color},children:t.icon})}),(0,W.jsx)(b.A,{primary:e.name,secondary:(0,W.jsxs)(l.A,{children:[(0,W.jsxs)(m.A,{variant:"caption",color:"text.secondary",children:[O(e.size)," \u2022 ",t.extension.toUpperCase()]}),(0,W.jsx)("br",{}),(0,W.jsxs)(m.A,{variant:"caption",color:"text.secondary",children:["Uploaded: ",new Date(e.uploadDate).toLocaleDateString()]})]})}),(0,W.jsx)(C.A,{children:(0,W.jsxs)(l.A,{sx:{display:"flex",gap:1},children:[(0,W.jsx)(v.A,{size:"small",onClick:()=>(e=>{const t=_(e.name);"pdf"===t.extension||t.types.includes("image")?T(e):G(e)})(e),title:"Preview/Download",children:(0,W.jsx)(B.A,{})}),(0,W.jsx)(v.A,{size:"small",onClick:()=>G(e),title:"Download",children:(0,W.jsx)(M.A,{})}),(0,W.jsx)(v.A,{size:"small",color:"error",onClick:()=>(e=>{const t=n.filter((t=>t.id!==e));i(t)})(e.id),title:"Delete",children:(0,W.jsx)(P.A,{})})]})})]},e.id)}))})]}),(0,W.jsxs)(y.A,{open:!!F,onClose:()=>T(null),maxWidth:"md",fullWidth:!0,children:[(0,W.jsxs)(D.A,{children:["File Preview: ",null===F||void 0===F?void 0:F.name]}),(0,W.jsx)(k.A,{children:F&&(0,W.jsx)(l.A,{sx:{textAlign:"center",p:2},children:_(F.name).types.includes("image")?(0,W.jsx)("img",{src:F.url,alt:F.name,style:{maxWidth:"100%",maxHeight:"500px",objectFit:"contain"}}):"pdf"===_(F.name).extension?(0,W.jsx)("iframe",{src:F.url,width:"100%",height:"500px",title:F.name}):(0,W.jsx)(m.A,{children:"Preview not available for this file type"})})}),(0,W.jsxs)(w.A,{children:[(0,W.jsx)(c.A,{onClick:()=>T(null),children:"Close"}),(0,W.jsx)(c.A,{variant:"contained",onClick:()=>G(F),startIcon:(0,W.jsx)(M.A,{}),children:"Download"})]})]})]})},R=[{value:"low",label:"Low",color:"#27ae60"},{value:"medium",label:"Medium",color:"#f39c12"},{value:"high",label:"High",color:"#e67e22"},{value:"urgent",label:"Urgent",color:"#e74c3c"}];const q=function(e){let{projects:t,teamMembers:r=[],onSubmit:u,initialTask:m=null}=e;const[g,j]=(0,a.useState)(m?{projectId:m.projectId||"",name:m.name||"",assignedTo:m.assignedTo||"",priority:m.priority||"medium",dueDate:m.dueDate?new Date(m.dueDate):null,description:m.description||""}:{projectId:"",name:"",assignedTo:"",priority:"medium",dueDate:null,description:""}),[A,f]=(0,a.useState)([]),[b,C]=(0,a.useState)({}),[v,y]=(0,a.useState)(!1),D=e=>t=>{j((0,o.A)((0,o.A)({},g),{},{[e]:t.target.value})),b[e]&&C((0,o.A)((0,o.A)({},b),{},{[e]:""}))};return(0,W.jsx)(p.$,{dateAdapter:h.h,children:(0,W.jsxs)(l.A,{component:"form",onSubmit:e=>{if(e.preventDefault(),(()=>{const e={};return g.projectId||(e.projectId="Please select a project"),g.name&&g.name.trim()||(e.name="Task name is required"),g.assignedTo||(e.assignedTo="Please select a team member"),g.dueDate||(e.dueDate="Due date is required"),C(e),0===Object.keys(e).length})()){const e=(0,o.A)((0,o.A)({},g),{},{projectId:parseInt(g.projectId),assignedTo:parseInt(g.assignedTo),dueDate:g.dueDate.toISOString().split("T")[0],files:A});m&&(e.id=m.id),u(e),m||(j({projectId:"",name:"",assignedTo:"",priority:"medium",dueDate:null,description:""}),f([])),y(!0),setTimeout((()=>y(!1)),3e3)}},sx:{display:"flex",flexDirection:"column",gap:2},children:[v&&(0,W.jsx)(s.A,{severity:"success",children:"Task added successfully!"}),(0,W.jsx)(n.A,{select:!0,label:"Select Project",value:g.projectId,onChange:D("projectId"),error:!!b.projectId,helperText:b.projectId||(0===t.length?"Create a project first":""),fullWidth:!0,required:!0,disabled:0===t.length,children:t.map((e=>(0,W.jsxs)(i.A,{value:e.id,children:[e.name," (",e.type,")"]},e.id)))}),(0,W.jsx)(n.A,{label:"Task Name",value:g.name,onChange:D("name"),error:!!b.name,helperText:b.name,fullWidth:!0,required:!0}),(0,W.jsx)(n.A,{select:!0,label:"Assigned To",value:g.assignedTo||"",onChange:D("assignedTo"),error:!!b.assignedTo,helperText:b.assignedTo||(0===r.length?"Add team members first":""),fullWidth:!0,required:!0,disabled:0===r.length,children:r.filter((e=>"active"===e.status)).map((e=>(0,W.jsx)(i.A,{value:e.id,children:(0,W.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,W.jsx)(d.A,{sx:{width:24,height:24,fontSize:12,bgcolor:e.roleColor},children:e.initials}),e.fullName," - ",e.role]})},e.id)))}),(0,W.jsx)(n.A,{select:!0,label:"Priority",value:g.priority,onChange:D("priority"),fullWidth:!0,required:!0,children:R.map((e=>(0,W.jsx)(i.A,{value:e.value,sx:{borderLeft:"4px solid ".concat(e.color),marginBottom:.5},children:e.label},e.value)))}),(0,W.jsx)(x.l,{label:"Due Date",value:g.dueDate,onChange:e=>{j((0,o.A)((0,o.A)({},g),{},{dueDate:e})),b.dueDate&&C((0,o.A)((0,o.A)({},b),{},{dueDate:""}))},minDate:new Date,slotProps:{textField:{error:!!b.dueDate,helperText:b.dueDate,fullWidth:!0,required:!0}}}),(0,W.jsx)(n.A,{label:"Task Description",value:g.description,onChange:D("description"),multiline:!0,rows:2,fullWidth:!0,placeholder:"Optional task details..."}),(0,W.jsx)(N,{taskId:Date.now(),projectId:g.projectId,files:A,onFilesChange:f,maxFiles:5,maxSize:10}),(0,W.jsx)(c.A,{type:"submit",variant:"contained",color:"secondary",size:"large",sx:{mt:2},disabled:0===t.length,children:m?"Save Changes":"Add Task"})]})})}},58315:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(99992),a=r(70579);const l=(0,o.A)((0,a.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},61773:(e,t,r)=>{r.d(t,{A:()=>l});var o=r(99992),a=r(70579);const l=(0,o.A)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},66866:(e,t,r)=>{r.d(t,{A:()=>S});var o=r(65043),a=r(53969),l=r(60267),s=r(86995),n=r(94799),i=r(42579),d=r(65749),c=r(55895),x=r(31202),p=r(26529),h=r(83759),u=r(32306),m=r(70923),g=r(61773),j=r(26582),A=r(5362),f=r(58315),b=r(51087),C=r(27601),v=r(96659),y=r(53724),D=r(70579);const k=e=>({completed:"#27AE60",active:"#8E44AD","in-progress":"#F39C12",in_progress:"#F39C12",pending:"#3498DB","on-hold":"#E67E22",on_hold:"#E67E22",cancelled:"#E74C3C",awarded:"#27AE60","on-tender":"#3498DB",on_tender:"#3498DB","not-awarded":"#E74C3C",not_awarded:"#E74C3C"}[null===e||void 0===e?void 0:e.toLowerCase()]||"#95A5A6"),w=e=>{let{currentPath:t=[],onNavigate:r,title:o,subtitle:w,itemType:E,itemId:S,itemData:F={},actions:T=[],onEdit:I,onDelete:z,onShare:B,showMoreActions:M=!1,isStarred:P=!1,onToggleStar:W,showBackButton:L=!0,backgroundColor:N="white",elevation:R=0}=e;const q=(0,l.A)(),_=(0,s.A)(q.breakpoints.down("md")),O=(()=>{const e=[{label:"Formula PM",icon:(0,D.jsx)(u.A,{sx:{fontSize:16}}),href:"/",onClick:()=>r&&r("/")},{label:"Team Space",icon:(0,D.jsx)(m.A,{sx:{fontSize:16}}),href:"/dashboard",onClick:()=>r&&r("/dashboard")}];return t.forEach(((o,a)=>{e.push({label:o.label,href:o.href,onClick:()=>r&&r(o.href),isLast:a===t.length-1})})),e})(),U=[...T||[],...I?[{icon:(0,D.jsx)(g.A,{}),label:"Edit",onClick:I,color:"primary"}]:[],...B?[{icon:(0,D.jsx)(j.A,{}),label:"Share",onClick:B,color:"default"}]:[],...z?[{icon:(0,D.jsx)(A.A,{}),label:"Delete",onClick:z,color:"error"}]:[]];return(0,D.jsxs)(n.A,{elevation:R,sx:{backgroundColor:N,borderBottom:"1px solid #E9ECEF",px:{xs:2,md:4},py:3,borderRadius:0},children:[_&&L&&(0,D.jsx)(a.A,{sx:{mb:2},children:(0,D.jsx)(i.A,{onClick:()=>{if(t.length>0){const e=t[t.length-1];r&&e.href?r(e.href):window.history.back()}else window.history.back()},size:"small",sx:{color:"#7F8C8D","&:hover":{color:"#2C3E50"}},children:(0,D.jsx)(f.A,{})})}),!_&&(0,D.jsx)(d.A,{separator:(0,D.jsx)(b.A,{fontSize:"small"}),sx:{mb:2,fontSize:"0.875rem","& .MuiBreadcrumbs-separator":{color:"#7F8C8D"}},children:O.map(((e,t)=>t===O.length-1?(0,D.jsxs)(c.A,{color:"text.primary",fontWeight:500,sx:{color:"#2C3E50",display:"flex",alignItems:"center",gap:.5},children:[e.icon,e.label]},t):(0,D.jsxs)(x.A,{underline:"hover",color:"inherit",href:e.href||"#",onClick:t=>{t.preventDefault(),e.onClick&&e.onClick()},sx:{display:"flex",alignItems:"center",gap:.5,color:"#7F8C8D",cursor:"pointer","&:hover":{color:"#2C3E50"}},children:[e.icon,e.label]},t)))}),(0,D.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:{xs:"flex-start",md:"center"},flexDirection:{xs:"column",md:"row"},gap:{xs:2,md:0}},children:[(0,D.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:2,flex:1},children:[(0,D.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,D.jsx)(c.A,{variant:"h4",sx:{fontWeight:700,color:"#2C3E50",fontSize:{xs:"1.5rem",md:"1.75rem"}},children:o}),W&&(0,D.jsx)(p.A,{title:P?"Remove from favorites":"Add to favorites",children:(0,D.jsx)(i.A,{size:"small",onClick:W,sx:{color:P?"#F39C12":"#BDC3C7","&:hover":{color:P?"#E67E22":"#F39C12"}},children:P?(0,D.jsx)(C.A,{}):(0,D.jsx)(v.A,{})})})]}),(w||F.status||F.type)&&(0,D.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap",ml:{xs:0,md:2}},children:[w&&(0,D.jsx)(c.A,{variant:"body2",sx:{color:"#7F8C8D",fontSize:"0.9rem"},children:w}),F.status&&(0,D.jsx)(h.A,{label:F.status,size:"small",sx:{height:24,fontSize:"0.75rem",backgroundColor:k(F.status),color:"white",fontWeight:600}}),F.type&&(0,D.jsx)(h.A,{label:F.type,size:"small",variant:"outlined",sx:{height:24,fontSize:"0.75rem",borderColor:"#D5DBDB",color:"#7F8C8D"}})]})]}),U.length>0&&(0,D.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1.5,flexShrink:0},children:[U.slice(0,_?2:4).map(((e,t)=>(0,D.jsx)(p.A,{title:e.label,children:(0,D.jsx)(i.A,{onClick:e.onClick,size:"small",sx:{backgroundColor:"primary"===e.color?"#3498DB":"#F8F9FA",color:"primary"===e.color?"white":"error"===e.color?"#E74C3C":"#7F8C8D",border:"primary"===e.color?"none":"1px solid #E9ECEF",borderRadius:2,width:36,height:36,"&:hover":{backgroundColor:"primary"===e.color?"#2980B9":"error"===e.color?"#fadbd8":"#ECF0F1",transform:"translateY(-1px)",boxShadow:"primary"===e.color?"0 4px 12px rgba(52, 152, 219, 0.3)":"none"}},children:e.icon})},t))),(U.length>(_?2:4)||M)&&(0,D.jsx)(p.A,{title:"More options",children:(0,D.jsx)(i.A,{size:"small",sx:{backgroundColor:"#F8F9FA",border:"1px solid #E9ECEF",borderRadius:2,width:36,height:36,"&:hover":{backgroundColor:"#ECF0F1",border:"1px solid #D5DBDB"}},children:(0,D.jsx)(y.A,{sx:{fontSize:18}})})})]})]})]})};var E=r(42509);const S=e=>{let{pageType:t,pageTitle:r,pageData:l={},parentPath:s,onNavigate:n,subtitle:i,actions:d=[],isStarred:c=!1,onToggleStar:x,onEdit:p,onDelete:h,onShare:u,children:m,showBreadcrumb:g=!0,breadcrumbElevation:j=0,contentPadding:A=3}=e;const{navigateTo:f,getBreadcrumbConfig:b}=(0,E.cq)();(0,o.useEffect)((()=>{t&&r&&f({title:r,path:window.location.pathname,type:t,parentPath:s,data:l})}),[t,r,s,l,f]);const C=b();return(0,D.jsxs)(a.A,{sx:{minHeight:"100vh",backgroundColor:"#F8F9FA"},children:[g&&(0,D.jsx)(w,{currentPath:C.currentPath,title:r,subtitle:i,itemType:t,itemData:l,actions:d,isStarred:c,onToggleStar:x,onEdit:p,onDelete:h,onShare:u,onNavigate:e=>{n?n(e):window.history.pushState({},"",e)},elevation:j}),(0,D.jsx)(a.A,{sx:{p:A},children:m})]})}}}]);
//# sourceMappingURL=722.63175d9e.chunk.js.map