"use strict";(self.webpackChunkformula_project_app=self.webpackChunkformula_project_app||[]).push([[632],{7762:(e,l,t)=>{t.d(l,{A:()=>a});var r=t(99992),o=t(70579);const a=(0,r.A)((0,o.jsx)("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree")},8632:(e,l,t)=>{t.r(l),t.d(l,{default:()=>F});var r=t(89379),o=t(65043),a=t(53969),n=t(55895),s=t(53089),i=t(91244),c=t(16128),d=t(83759),x=t(42579),h=t(26020),b=t(82327),u=t(71101),p=t(27365),g=t(27496),m=t(87186),j=t(93201),A=t(69200),f=t(3665),v=t(61773),y=t(34879),C=t(77539),w=t(35771),k=t(50185),D=t(70579);const F=e=>{let{projects:l,tasks:t,clients:F=[],teamMembers:S=[],onDeleteProject:z,onEditProject:M,onViewProject:W,onManageScope:T,onViewTask:E,onEditTask:I,onUpdateTask:P,currentUserId:V=1008}=e;const[H,N]=(0,o.useState)(""),[L,O]=(0,o.useState)(!1),[B,R]=(0,o.useState)("card"),[U,G]=(0,o.useState)({status:"",type:"",client:"",startDateFrom:null,startDateTo:null,endDateFrom:null,endDateTo:null,budgetFrom:"",budgetTo:""}),Y=l.filter((e=>e.projectManager===V)),_=t.filter((e=>e.assignedTo===V)),q=[{key:"status",label:"Status",type:"select",options:[{value:"on-tender",label:"On Tender"},{value:"awarded",label:"Awarded"},{value:"on-hold",label:"On Hold"},{value:"not-awarded",label:"Not Awarded"},{value:"active",label:"Active"},{value:"completed",label:"Completed"}]},{key:"type",label:"Type",type:"select",options:[{value:"general-contractor",label:"General Contractor"},{value:"millwork",label:"Millwork"},{value:"electrical",label:"Electrical"},{value:"mep",label:"MEP"},{value:"management",label:"Management"}]},{key:"client",label:"Client",type:"select",options:F.map((e=>({value:e.id,label:e.companyName})))},{key:"startDateFrom",label:"Start Date From",type:"date"},{key:"startDateTo",label:"Start Date To",type:"date"},{key:"endDateFrom",label:"End Date From",type:"date"},{key:"endDateTo",label:"End Date To",type:"date"},{key:"budgetFrom",label:"Budget From",type:"number",placeholder:"Min budget"},{key:"budgetTo",label:"Budget To",type:"number",placeholder:"Max budget"}],Q=[{label:"Active Projects",filters:{status:"active"}},{label:"On Tender",filters:{status:"on-tender"}},{label:"This Month",filters:{startDateFrom:new Date((new Date).getFullYear(),(new Date).getMonth(),1),startDateTo:new Date((new Date).getFullYear(),(new Date).getMonth()+1,0)}},{label:"Overdue",filters:{}}],$=(0,o.useMemo)((()=>Y.filter((e=>{const l=H.toLowerCase(),t=!H||e.name.toLowerCase().includes(l)||e.description&&e.description.toLowerCase().includes(l),r=!U.status||e.status===U.status,o=!U.type||e.type===U.type,a=!U.client||e.clientId===parseInt(U.client),n=e.startDate?new Date(e.startDate):null,s=e.endDate?new Date(e.endDate):null,i=!U.startDateFrom||n&&n>=U.startDateFrom,c=!U.startDateTo||n&&n<=U.startDateTo,d=!U.endDateFrom||s&&s>=U.endDateFrom,x=!U.endDateTo||s&&s<=U.endDateTo,h=e.budget?parseFloat(e.budget):0,b=!U.budgetFrom||h>=parseFloat(U.budgetFrom),u=!U.budgetTo||h<=parseFloat(U.budgetTo);return t&&r&&o&&a&&i&&c&&d&&x&&b&&u}))),[Y,H,U]),J=Object.entries(U).filter((e=>{let[l,t]=e;return"string"===typeof t?""!==t:t instanceof Date||null!==t&&void 0!==t})).map((e=>{var l;let[t,r]=e;return{key:t,label:(null===(l=q.find((e=>e.key===t)))||void 0===l?void 0:l.label)||t,value:r instanceof Date?r.toLocaleDateString():r}})),K=()=>{G({status:"",type:"",client:"",startDateFrom:null,startDateTo:null,endDateFrom:null,endDateTo:null,budgetFrom:"",budgetTo:""})},X=e=>{"all"===e?K():e.includes("Date")?G((l=>(0,r.A)((0,r.A)({},l),{},{[e]:null}))):G((l=>(0,r.A)((0,r.A)({},l),{},{[e]:""})))},Z=()=>{console.log("Export my projects:",$)},ee={low:{label:"Low",color:"#27ae60",bgColor:"#eafaf1",icon:(0,D.jsx)(b.A,{})},medium:{label:"Medium",color:"#f39c12",bgColor:"#fef9e7",icon:(0,D.jsx)(b.A,{})},high:{label:"High",color:"#e67e22",bgColor:"#fef5e7",icon:(0,D.jsx)(u.A,{})},urgent:{label:"Urgent",color:"#e74c3c",bgColor:"#fdf2f2",icon:(0,D.jsx)(p.A,{})}},le={pending:{label:"To Do",color:"#f39c12",bgColor:"#fef9e7",icon:(0,D.jsx)(g.A,{})},"in-progress":{label:"In Progress",color:"#3498db",bgColor:"#ebf5fb",icon:(0,D.jsx)(m.A,{})},in_progress:{label:"In Progress",color:"#3498db",bgColor:"#ebf5fb",icon:(0,D.jsx)(m.A,{})},completed:{label:"Done",color:"#27ae60",bgColor:"#eafaf1",icon:(0,D.jsx)(j.A,{})}},te=e=>{const t=l.find((l=>l.id===e));return t?t.name:"Unknown Project"},re=e=>{const l=new Date(e);return l.toLocaleDateString("en-US",{month:"short",day:"numeric",year:l.getFullYear()!==(new Date).getFullYear()?"numeric":void 0})};return 0===Y.length&&0===_.length?(0,D.jsxs)(a.A,{children:[(0,D.jsx)(y.A,{title:"My Work",searchValue:H,onSearchChange:N,showFilters:L,onToggleFilters:()=>O(!L),activeFiltersCount:J.length,viewMode:B,onViewModeChange:R,onExport:Z,showAdd:!1,activeFilters:J,onClearFilter:X}),(0,D.jsxs)(a.A,{sx:{textAlign:"center",py:4},children:[(0,D.jsx)(A.A,{sx:{fontSize:64,color:"text.secondary",mb:2}}),(0,D.jsx)(n.A,{variant:"body1",color:"text.secondary",children:"No projects or tasks assigned to you yet."})]})]}):(0,D.jsxs)(a.A,{children:[(0,D.jsx)(y.A,{title:"My Work",subtitle:"".concat($.length," projects \u2022 ").concat(_.length," tasks"),searchValue:H,onSearchChange:N,showFilters:L,onToggleFilters:()=>O(!L),activeFiltersCount:J.length,viewMode:B,onViewModeChange:R,onExport:Z,showAdd:!1,activeFilters:J,onClearFilter:X}),(0,D.jsx)(C.A,{show:L,filters:U,onFilterChange:(e,l)=>{G((t=>(0,r.A)((0,r.A)({},t),{},{[e]:l})))},onClearFilters:K,onApplyQuickFilter:e=>{G((l=>(0,r.A)((0,r.A)({},l),e.filters)))},filterConfig:q,quickFilters:Q}),_.length>0&&(0,D.jsxs)(a.A,{sx:{mb:4},children:[(0,D.jsxs)(n.A,{variant:"h6",sx:{mb:2,fontWeight:600,color:"#2C3E50"},children:["\ud83d\udccb My Tasks (",_.length,")"]}),(0,D.jsx)(s.A,{container:!0,spacing:2,children:_.slice(0,6).map((e=>{const l=ee[e.priority]||ee.medium,t=le[e.status]||le.pending,r=(e=>{if("completed"===e.status)return!1;const l=new Date;return l.setHours(0,0,0,0),new Date(e.dueDate)<l})(e);return(0,D.jsx)(s.A,{item:!0,xs:12,sm:6,md:4,children:(0,D.jsx)(i.A,{elevation:0,sx:{border:"1px solid #E9ECEF",borderRadius:2,borderLeft:"4px solid ".concat(l.color),"&:hover":{boxShadow:2,transform:"translateY(-2px)"},transition:"all 0.2s ease"},children:(0,D.jsxs)(c.A,{sx:{p:2},children:[(0,D.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[(0,D.jsx)(n.A,{variant:"body1",sx:{fontWeight:600,flex:1},children:e.name}),(0,D.jsx)(d.A,{size:"small",label:t.label,sx:{backgroundColor:t.bgColor,color:t.color,fontWeight:600,ml:1}})]}),e.description&&(0,D.jsx)(n.A,{variant:"body2",color:"textSecondary",sx:{mb:1.5},children:e.description}),(0,D.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,D.jsx)(d.A,{size:"small",label:te(e.projectId),sx:{backgroundColor:"#F8F9FA",color:"#7F8C8D"}}),(0,D.jsx)(d.A,{size:"small",label:l.label,sx:{backgroundColor:l.bgColor,color:l.color,fontWeight:600}})]}),(0,D.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,D.jsxs)(n.A,{variant:"caption",sx:{color:r?"#e74c3c":"text.secondary",fontWeight:r?600:400},children:["Due: ",re(e.dueDate),r&&" (Overdue)"]}),(0,D.jsxs)(a.A,{sx:{display:"flex",gap:.5},children:[(0,D.jsx)(x.A,{size:"small",onClick:()=>E&&E(e),sx:{color:"#3498db"},children:(0,D.jsx)(f.A,{fontSize:"small"})}),(0,D.jsx)(x.A,{size:"small",onClick:()=>I&&I(e),sx:{color:"#f39c12"},children:(0,D.jsx)(v.A,{fontSize:"small"})})]})]}),void 0!==e.progress&&e.progress>0&&(0,D.jsxs)(a.A,{sx:{mt:1},children:[(0,D.jsx)(h.A,{variant:"determinate",value:e.progress,sx:{height:6,borderRadius:3,backgroundColor:"#E9ECEF"}}),(0,D.jsxs)(n.A,{variant:"caption",sx:{mt:.5,display:"block"},children:[e.progress,"% complete"]})]})]})})},e.id)}))}),_.length>6&&(0,D.jsx)(a.A,{sx:{textAlign:"center",mt:2},children:(0,D.jsxs)(n.A,{variant:"body2",color:"textSecondary",children:["Showing 6 of ",_.length," tasks. View all tasks in the Tasks section."]})})]}),Y.length>0&&(0,D.jsxs)(a.A,{children:[(0,D.jsxs)(n.A,{variant:"h6",sx:{mb:2,fontWeight:600,color:"#2C3E50"},children:["\ud83c\udfaf My Projects (",$.length,")"]}),"table"===B&&(0,D.jsx)(k.default,{projects:$,clients:F,teamMembers:S,onEditProject:M,onDeleteProject:z,onViewProject:W,onManageScope:T}),"card"===B&&(0,D.jsx)(w.default,{projects:$,tasks:t,clients:F,onDeleteProject:z})]})]})}},27365:(e,l,t)=>{t.d(l,{A:()=>a});var r=t(99992),o=t(70579);const a=(0,r.A)([(0,o.jsx)("circle",{cx:"12",cy:"19",r:"2"},"0"),(0,o.jsx)("path",{d:"M10 3h4v12h-4z"},"1")],"PriorityHigh")},27496:(e,l,t)=>{t.d(l,{A:()=>a});var r=t(99992),o=t(70579);const a=(0,r.A)([(0,o.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,o.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule")},34879:(e,l,t)=>{t.d(l,{A:()=>f});t(65043);var r=t(53969),o=t(55895),a=t(26529),n=t(42579),s=t(41859),i=t(24343),c=t(33699),d=t(71863),x=t(83759),h=t(8104),b=t(43900),u=t(50103),p=t(22950),g=t(63745),m=t(78916),j=t(40847),A=t(70579);const f=e=>{let{title:l,searchValue:t,onSearchChange:f,showFilters:v,onToggleFilters:y,activeFiltersCount:C,viewMode:w,onViewModeChange:k,onExport:D,onAdd:F,addButtonText:S="Add New",exportButtonText:z="Export",showAdd:M=!0,showExport:W=!0,showViewToggle:T=!0,activeFilters:E=[],onClearFilter:I}=e;return(0,A.jsxs)(r.A,{sx:{mb:3},children:[(0,A.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexWrap:"wrap",gap:2},children:[(0,A.jsx)(o.A,{variant:"h5",component:"h2",sx:{fontWeight:600},children:l}),(0,A.jsxs)(r.A,{sx:{display:"flex",gap:1,alignItems:"center",flexWrap:"wrap"},children:[T&&(0,A.jsxs)(r.A,{sx:{display:"flex",border:1,borderColor:"divider",borderRadius:1},children:[(0,A.jsx)(a.A,{title:"Card View",children:(0,A.jsx)(n.A,{size:"small",onClick:()=>k("card"),sx:{color:"card"===w?"primary.main":"text.secondary",backgroundColor:"card"===w?"action.selected":"transparent",borderRadius:"4px 0 0 4px"},children:(0,A.jsx)(h.A,{})})}),(0,A.jsx)(a.A,{title:"Table View",children:(0,A.jsx)(n.A,{size:"small",onClick:()=>k("table"),sx:{color:"table"===w?"primary.main":"text.secondary",backgroundColor:"table"===w?"action.selected":"transparent",borderRadius:"0 4px 4px 0"},children:(0,A.jsx)(b.A,{})})})]}),W&&(0,A.jsx)(s.A,{variant:"outlined",startIcon:(0,A.jsx)(u.A,{}),onClick:D,size:"small",children:z}),M&&(0,A.jsx)(s.A,{variant:"contained",startIcon:(0,A.jsx)(p.A,{}),onClick:F,size:"small",children:S})]})]}),(0,A.jsxs)(r.A,{sx:{display:"flex",gap:2,alignItems:"center",mb:2,flexWrap:"wrap"},children:[(0,A.jsx)(i.A,{placeholder:"Search ".concat(l.toLowerCase(),"..."),value:t,onChange:e=>f(e.target.value),size:"small",sx:{minWidth:300,flexGrow:1,maxWidth:400},InputProps:{startAdornment:(0,A.jsx)(c.A,{position:"start",children:(0,A.jsx)(g.A,{color:"action"})}),endAdornment:t&&(0,A.jsx)(c.A,{position:"end",children:(0,A.jsx)(n.A,{size:"small",onClick:()=>{f("")},edge:"end",children:(0,A.jsx)(m.A,{})})})}}),(0,A.jsx)(d.A,{badgeContent:C,color:"primary",children:(0,A.jsx)(s.A,{variant:v?"contained":"outlined",startIcon:(0,A.jsx)(j.A,{}),onClick:y,size:"small",children:"Filters"})})]}),E.length>0&&(0,A.jsxs)(r.A,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2,alignItems:"center"},children:[(0,A.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mr:1,alignSelf:"center"},children:"Active filters:"}),E.map(((e,l)=>(0,A.jsx)(x.A,{label:"".concat(e.label,": ").concat(e.value),size:"small",onDelete:()=>I&&I(e.key),color:"primary",variant:"outlined"},l))),E.length>1&&(0,A.jsx)(s.A,{size:"small",onClick:()=>I&&I("all"),sx:{color:"error.main",textTransform:"none",fontSize:"0.75rem",minWidth:"auto",px:1},children:"Clear All"})]})]})}},35771:(e,l,t)=>{t.r(l),t.d(l,{default:()=>y});t(65043);var r=t(53969),o=t(55895),a=t(53089),n=t(91244),s=t(16128),i=t(83759),c=t(42579),d=t(41859),x=t(99992),h=t(70579);const b=(0,x.A)((0,h.jsx)("path",{d:"m22.7 19-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4"}),"Build"),u=(0,x.A)((0,h.jsx)("path",{d:"M19.73 14.23 7 1.5 3.11 5.39l8.13 11.67c-.78.78-.78 2.05 0 2.83l1.41 1.41c.78.78 2.05.78 2.83 0l4.24-4.24c.79-.78.79-2.05.01-2.83m-5.66 5.65-1.41-1.41 4.24-4.24 1.41 1.41z"}),"Carpenter"),p=(0,x.A)([(0,h.jsx)("path",{d:"M21 14c0-.55-.45-1-1-1h-2v2h2c.55 0 1-.45 1-1m-1 3h-2v2h2c.55 0 1-.45 1-1s-.45-1-1-1m-8-3h-2v4h2c0 1.1.9 2 2 2h3v-8h-3c-1.1 0-2 .9-2 2"},"0"),(0,h.jsx)("path",{d:"M5 13c0-1.1.9-2 2-2h1.5c1.93 0 3.5-1.57 3.5-3.5S10.43 4 8.5 4H5c-.55 0-1 .45-1 1s.45 1 1 1h3.5c.83 0 1.5.67 1.5 1.5S9.33 9 8.5 9H7c-2.21 0-4 1.79-4 4s1.79 4 4 4h2v-2H7c-1.1 0-2-.9-2-2"},"1")],"ElectricalServices"),g=(0,x.A)((0,h.jsx)("path",{d:"M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4m13.1-8.16c.01-.11.02-.22.02-.34s-.01-.23-.03-.34l.74-.58c.07-.05.08-.15.04-.22l-.7-1.21c-.04-.08-.14-.1-.21-.08l-.86.35c-.18-.14-.38-.25-.59-.34l-.13-.93c-.02-.09-.09-.15-.18-.15h-1.4c-.09 0-.16.06-.17.15l-.13.93c-.21.09-.41.21-.59.34l-.87-.35c-.08-.03-.17 0-.21.08l-.7 1.21c-.04.08-.03.17.04.22l.74.58c-.02.11-.03.23-.03.34s.01.23.03.34l-.74.58c-.07.05-.08.15-.04.22l.7 1.21c.04.08.14.1.21.08l.87-.35c.18.14.38.25.59.34l.13.93c.01.09.08.15.17.15h1.4c.09 0 .16-.06.17-.15l.13-.93c.21-.09.41-.21.59-.34l.87.35c.08.03.17 0 .21-.08l.7-1.21c.04-.08.03-.17-.04-.22zm-2.6.91c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25m.42 3.93-.5-.87c-.03-.06-.1-.08-.15-.06l-.62.25q-.195-.15-.42-.24l-.09-.66c-.02-.06-.08-.1-.14-.1h-1c-.06 0-.11.04-.12.11l-.09.66c-.15.06-.29.15-.42.24l-.62-.25c-.06-.02-.12 0-.15.06l-.5.87c-.03.06-.02.12.03.16l.53.41c-.01.08-.02.16-.02.24s.01.17.02.24l-.53.41c-.05.04-.06.11-.03.16l.5.87c.03.06.1.08.15.06l.62-.25q.195.15.42.24l.09.66c.01.07.06.11.12.11h1c.06 0 .12-.04.12-.11l.09-.66c.15-.06.29-.15.42-.24l.62.25c.06.02.12 0 .15-.06l.5-.87c.03-.06.02-.12-.03-.16l-.52-.41c.01-.08.02-.16.02-.24s-.01-.17-.02-.24l.53-.41c.05-.04.06-.11.04-.17m-2.42 1.65c-.46 0-.83-.38-.83-.83 0-.46.38-.83.83-.83s.83.38.83.83c0 .46-.37.83-.83.83M4.74 9h8.53c.27 0 .49-.22.49-.49v-.02c0-.27-.22-.49-.49-.49H13c0-1.48-.81-2.75-2-3.45v.95c0 .28-.22.5-.5.5s-.5-.22-.5-.5V4.14C9.68 4.06 9.35 4 9 4s-.68.06-1 .14V5.5c0 .28-.22.5-.5.5S7 5.78 7 5.5v-.95C5.81 5.25 5 6.52 5 8h-.26c-.27 0-.49.22-.49.49v.03c0 .26.22.48.49.48M9 13c1.86 0 3.41-1.28 3.86-3H5.14c.45 1.72 2 3 3.86 3"}),"Engineering");var m=t(70923),j=t(5362),A=t(63898);const f={"general-contractor":{label:"General Contractor",icon:(0,h.jsx)(b,{}),color:"#e67e22",bgColor:"#fef5e7"},"fit-out":{label:"Fit-out (Legacy)",icon:(0,h.jsx)(b,{}),color:"#e67e22",bgColor:"#fef5e7"},millwork:{label:"Millwork",icon:(0,h.jsx)(u,{}),color:"#8e44ad",bgColor:"#f4ecf7"},electrical:{label:"Electrical",icon:(0,h.jsx)(p,{}),color:"#f1c40f",bgColor:"#fffbf0"},mep:{label:"MEP",icon:(0,h.jsx)(g,{}),color:"#1abc9c",bgColor:"#e8f8f5"},management:{label:"Management",icon:(0,h.jsx)(m.A,{}),color:"#37444B",bgColor:"#f5f5f5"}},v={"on-tender":{label:"On Tender",color:"#3498db",bgColor:"#ebf3fd"},awarded:{label:"Awarded",color:"#27ae60",bgColor:"#eafaf1"},"on-hold":{label:"On Hold",color:"#f39c12",bgColor:"#fef9e7"},"not-awarded":{label:"Not Awarded",color:"#e74c3c",bgColor:"#fdedec"},active:{label:"Active",color:"#9b59b6",bgColor:"#f4ecf7"},completed:{label:"Completed",color:"#2c3e50",bgColor:"#eaeded"}};const y=function(e){let{projects:l,tasks:t,clients:x=[],onDeleteProject:u,onManageScope:p}=e;if(0===l.length)return(0,h.jsx)(r.A,{sx:{textAlign:"center",py:4},children:(0,h.jsx)(o.A,{variant:"body1",color:"text.secondary",children:"No projects created yet. Create your first project to get started!"})});const g=e=>{const l=x.find((l=>l.id===e));return l?l.companyName:"No Client Assigned"},y=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,h.jsx)(a.A,{container:!0,spacing:3,children:l.map((e=>{const l=f[e.type]||{label:"General Contractor",icon:(0,h.jsx)(b,{}),color:"#e67e22",bgColor:"#fef5e7"},x=(e=>{const l=t.filter((l=>l.projectId===e));if(0===l.length)return 0;const r=l.filter((e=>"completed"===e.status)).length;return Math.round(r/l.length*100)})(e.id),C=(e=>{const l=t.filter((l=>l.projectId===e)),r=l.filter((e=>"completed"===e.status)).length,o=l.filter((e=>{const l=new Date;return l.setHours(0,0,0,0),"completed"!==e.status&&new Date(e.dueDate)<l})).length;return{total:l.length,completed:r,pending:l.length-r,overdue:o}})(e.id),w=(e=>e.status||"on-tender")(e),k=v[w]||{label:"On Tender",color:"#3498db",bgColor:"#ebf3fd"};return(0,h.jsx)(a.A,{item:!0,xs:12,md:6,children:(0,h.jsx)(n.A,{className:"project-card construction-card type-".concat(e.type),sx:{cursor:"pointer",position:"relative",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onClick:()=>{},children:(0,h.jsxs)(s.A,{children:[(0,h.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,h.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,h.jsx)(r.A,{sx:{color:l.color},children:l.icon}),(0,h.jsx)(i.A,{label:l.label,size:"small",sx:{backgroundColor:l.bgColor,color:l.color,fontWeight:"bold"}})]}),(0,h.jsx)(i.A,{label:k.label,size:"small",sx:{backgroundColor:k.bgColor,color:k.color,fontWeight:"bold"}}),(0,h.jsx)(c.A,{size:"small",onClick:l=>{var t,r;l.stopPropagation(),t=e.id,r=e.name,window.confirm('Are you sure you want to delete "'.concat(r,'"? This will also delete all associated tasks.'))&&u(t)},sx:{color:"#e74c3c"},children:(0,h.jsx)(j.A,{fontSize:"small"})})]}),(0,h.jsx)(o.A,{variant:"h6",component:"h3",gutterBottom:!0,sx:{color:"#3498db",cursor:"pointer",textDecoration:"none","&:hover":{textDecoration:"underline",color:"#2980b9"}},onClick:l=>{l.stopPropagation(),p&&p(e)},children:e.name}),e.clientId&&(0,h.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,h.jsx)(m.A,{fontSize:"small",color:"action"}),(0,h.jsxs)(o.A,{variant:"body2",color:"text.secondary",children:["Client: ",g(e.clientId)]})]}),(0,h.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[(0,h.jsx)(A.A,{fontSize:"small",color:"action"}),(0,h.jsxs)(o.A,{variant:"body2",color:"text.secondary",children:[y(e.startDate)," - ",y(e.endDate)]})]}),(0,h.jsxs)(r.A,{sx:{mb:2},children:[(0,h.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,h.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Progress"}),(0,h.jsxs)(o.A,{variant:"body2",color:"text.secondary",children:[x,"%"]})]}),(0,h.jsx)("div",{className:"construction-progress",children:(0,h.jsx)("div",{className:"construction-progress-fill",style:{width:"".concat(x,"%")}})})]}),(0,h.jsx)(r.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:(0,h.jsxs)(r.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,h.jsxs)("span",{className:"status-badge status-badge-todo",style:{fontSize:"11px",padding:"2px 6px"},children:[C.total," total"]}),(0,h.jsxs)("span",{className:"status-badge status-badge-completed",style:{fontSize:"11px",padding:"2px 6px"},children:[C.completed," done"]}),C.overdue>0&&(0,h.jsxs)("span",{className:"status-badge status-badge-cancelled",style:{fontSize:"11px",padding:"2px 6px"},children:[C.overdue," overdue"]})]})}),(0,h.jsx)(d.A,{size:"small",variant:"outlined",fullWidth:!0,onClick:e=>{e.stopPropagation()},sx:{borderRadius:"8px",textTransform:"none",fontWeight:500},children:"View Details"})]})})},e.id)}))})}},50185:(e,l,t)=>{t.r(l),t.d(l,{default:()=>W});var r=t(65043),o=t(53969),a=t(55895),n=t(94799),s=t(28259),i=t(87443),c=t(10756),d=t(86172),x=t(81341),h=t(41778),b=t(34375),u=t(33539),p=t(83759),g=t(26020),m=t(42579),j=t(62055),A=t(47471),f=t(79801),v=t(66185),y=t(70923),C=t(90160),w=t(63898),k=t(12043),D=t(3665),F=t(61773),S=t(7762),z=t(5362),M=t(70579);const W=e=>{let{projects:l=[],clients:t=[],teamMembers:W=[],onEditProject:T,onDeleteProject:E,onViewProject:I,onManageScope:P}=e;const[V,H]=(0,r.useState)("name"),[N,L]=(0,r.useState)("asc"),[O,B]=(0,r.useState)(null),[R,U]=(0,r.useState)(null),G=e=>{const l=t.find((l=>l.id===e));return l?l.companyName:"No Client Assigned"},Y=e=>{const l=W.find((l=>l.id===e));return l?l.fullName:"Unassigned"},_=e=>{if(!e)return"Not set";return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},q=r.useMemo((()=>[...l].sort(((e,l)=>{let t=e[V],r=l[V];return"client"===V&&(t=G(e.clientId),r=G(l.clientId)),"manager"===V&&(t=Y(e.projectManager),r=Y(l.projectManager)),t<r?"asc"===N?-1:1:t>r?"asc"===N?1:-1:0}))),[l,V,N,t,W]),Q=()=>{B(null),U(null)},$=e=>{if(R)switch(e){case"view":I&&I(R);break;case"edit":T&&T(R);break;case"scope":P&&P(R);break;case"delete":window.confirm('Are you sure you want to delete "'.concat(R.name,'"?'))&&E&&E(R.id)}Q()};return 0===l.length?(0,M.jsxs)(o.A,{sx:{textAlign:"center",py:8,backgroundColor:"white",borderRadius:2,border:"1px solid #E9ECEF"},children:[(0,M.jsx)(y.A,{sx:{fontSize:64,color:"#BDC3C7",mb:2}}),(0,M.jsx)(a.A,{variant:"h6",color:"textSecondary",gutterBottom:!0,children:"No Projects Found"}),(0,M.jsx)(a.A,{variant:"body2",color:"textSecondary",children:"Start by creating your first project or adjust your search filters."})]}):(0,M.jsxs)(n.A,{elevation:0,sx:{width:"100%",overflow:"hidden",border:"1px solid #E9ECEF",borderRadius:2},children:[(0,M.jsx)(s.A,{sx:{maxHeight:600},children:(0,M.jsxs)(i.A,{stickyHeader:!0,children:[(0,M.jsx)(c.A,{children:(0,M.jsx)(d.A,{children:[{id:"name",label:"Project Name",sortable:!0,minWidth:200},{id:"client",label:"Client",sortable:!0,minWidth:150},{id:"type",label:"Type",sortable:!0,minWidth:130},{id:"status",label:"Status",sortable:!0,minWidth:120},{id:"manager",label:"Manager",sortable:!0,minWidth:150},{id:"startDate",label:"Start Date",sortable:!0,minWidth:120},{id:"endDate",label:"End Date",sortable:!0,minWidth:120},{id:"progress",label:"Progress",sortable:!1,minWidth:120},{id:"actions",label:"Actions",sortable:!1,minWidth:80}].map((e=>(0,M.jsx)(x.A,{sx:{minWidth:e.minWidth,backgroundColor:"#F8F9FA",fontWeight:600,color:"#2C3E50"},children:e.sortable?(0,M.jsx)(h.A,{active:V===e.id,direction:V===e.id?N:"asc",onClick:()=>{return l=e.id,L(V===l&&"asc"===N?"desc":"asc"),void H(l);var l},children:e.label}):e.label},e.id)))})}),(0,M.jsx)(b.A,{children:q.map((e=>{const l=(e=>{const l={"on-tender":{label:"On Tender",color:"#3498db",bgColor:"#ebf3fd"},awarded:{label:"Awarded",color:"#27ae60",bgColor:"#eafaf1"},"on-hold":{label:"On Hold",color:"#f39c12",bgColor:"#fef9e7"},"not-awarded":{label:"Not Awarded",color:"#e74c3c",bgColor:"#fdedec"},active:{label:"Active",color:"#9b59b6",bgColor:"#f4ecf7"},completed:{label:"Completed",color:"#2c3e50",bgColor:"#eaeded"}};return l[e]||l["on-tender"]})(e.status),t=(e=>{const l={"general-contractor":{label:"General Contractor",color:"#e67e22"},"fit-out":{label:"Fit-out",color:"#e67e22"},mep:{label:"MEP",color:"#1abc9c"},electrical:{label:"Electrical",color:"#f1c40f"},millwork:{label:"Millwork",color:"#8e44ad"},management:{label:"Management",color:"#37444B"}};return l[e]||l["general-contractor"]})(e.type),r=Math.floor(100*Math.random());return(0,M.jsxs)(d.A,{hover:!0,sx:{"&:hover":{backgroundColor:"#F8F9FA"}},children:[(0,M.jsx)(x.A,{children:(0,M.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,M.jsx)(u.A,{sx:{width:32,height:32,backgroundColor:t.color,fontSize:"0.8rem",fontWeight:600},children:e.name.substring(0,2).toUpperCase()}),(0,M.jsx)(o.A,{children:(0,M.jsx)(a.A,{variant:"body2",sx:{fontWeight:600,color:"#3498db",cursor:"pointer",textDecoration:"none","&:hover":{textDecoration:"underline",color:"#2980b9"}},onClick:()=>P&&P(e),children:e.name})})]})}),(0,M.jsx)(x.A,{children:(0,M.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,M.jsx)(y.A,{fontSize:"small",color:"action"}),(0,M.jsx)(a.A,{variant:"body2",children:G(e.clientId)})]})}),(0,M.jsx)(x.A,{children:(0,M.jsx)(p.A,{label:t.label,size:"small",sx:{backgroundColor:"".concat(t.color,"15"),color:t.color,fontWeight:500,border:"1px solid ".concat(t.color,"30")}})}),(0,M.jsx)(x.A,{children:(0,M.jsx)(p.A,{label:l.label,size:"small",sx:{backgroundColor:l.bgColor,color:l.color,fontWeight:500}})}),(0,M.jsx)(x.A,{children:(0,M.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,M.jsx)(C.A,{fontSize:"small",color:"action"}),(0,M.jsx)(a.A,{variant:"body2",children:Y(e.projectManager)})]})}),(0,M.jsx)(x.A,{children:(0,M.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,M.jsx)(w.A,{fontSize:"small",color:"action"}),(0,M.jsx)(a.A,{variant:"body2",children:_(e.startDate)})]})}),(0,M.jsx)(x.A,{children:(0,M.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,M.jsx)(w.A,{fontSize:"small",color:"action"}),(0,M.jsx)(a.A,{variant:"body2",children:_(e.endDate)})]})}),(0,M.jsx)(x.A,{children:(0,M.jsx)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,M.jsxs)(o.A,{sx:{width:"100%"},children:[(0,M.jsx)(g.A,{variant:"determinate",value:r,sx:{height:6,borderRadius:3,backgroundColor:"#E0E0E0","& .MuiLinearProgress-bar":{backgroundColor:r>75?"#27AE60":r>50?"#F39C12":r>25?"#3498DB":"#E74C3C"}}}),(0,M.jsxs)(a.A,{variant:"caption",color:"textSecondary",children:[r,"%"]})]})})}),(0,M.jsx)(x.A,{children:(0,M.jsx)(m.A,{size:"small",onClick:l=>((e,l)=>{B(e.currentTarget),U(l)})(l,e),children:(0,M.jsx)(k.A,{})})})]},e.id)}))})]})}),(0,M.jsxs)(j.A,{anchorEl:O,open:Boolean(O),onClose:Q,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[(0,M.jsxs)(A.A,{onClick:()=>$("view"),children:[(0,M.jsx)(f.A,{children:(0,M.jsx)(D.A,{fontSize:"small"})}),(0,M.jsx)(v.A,{children:"View Details"})]}),(0,M.jsxs)(A.A,{onClick:()=>$("edit"),children:[(0,M.jsx)(f.A,{children:(0,M.jsx)(F.A,{fontSize:"small"})}),(0,M.jsx)(v.A,{children:"Edit Project"})]}),(0,M.jsxs)(A.A,{onClick:()=>$("scope"),children:[(0,M.jsx)(f.A,{children:(0,M.jsx)(S.A,{fontSize:"small"})}),(0,M.jsx)(v.A,{children:"Manage Scope"})]}),(0,M.jsxs)(A.A,{onClick:()=>$("delete"),sx:{color:"error.main"},children:[(0,M.jsx)(f.A,{children:(0,M.jsx)(z.A,{fontSize:"small",color:"error"})}),(0,M.jsx)(v.A,{children:"Delete Project"})]})]})]})}},63898:(e,l,t)=>{t.d(l,{A:()=>a});var r=t(99992),o=t(70579);const a=(0,r.A)((0,o.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday")},71101:(e,l,t)=>{t.d(l,{A:()=>a});var r=t(99992),o=t(70579);const a=(0,r.A)((0,o.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning")},77539:(e,l,t)=>{t.d(l,{A:()=>v});t(65043);var r=t(10256),o=t(79067),a=t(84938),n=t(36196),s=t(47471),i=t(53969),c=t(83759),d=t(24343),x=t(19e3),h=t(94799),b=t(55895),u=t(41859),p=t(94527),g=t(53089),m=t(53541),j=t(24793),A=t(5984),f=t(70579);const v=e=>{let{show:l,filters:t,onFilterChange:v,onClearFilters:y,onApplyQuickFilter:C,filterConfig:w,quickFilters:k=[]}=e;const D=(e,l)=>{v(e,l)},F=e=>{const{key:l,label:x,type:h,options:b,placeholder:u}=e,p=t[l]||"";switch(h){case"select":return(0,f.jsxs)(r.A,{fullWidth:!0,size:"small",children:[(0,f.jsx)(o.A,{children:x}),(0,f.jsxs)(a.A,{value:p,onChange:e=>D(l,e.target.value),input:(0,f.jsx)(n.A,{label:x}),children:[(0,f.jsxs)(s.A,{value:"",children:["All ",x]}),b.map((e=>(0,f.jsx)(s.A,{value:e.value,children:e.label},e.value)))]})]});case"multiselect":return(0,f.jsxs)(r.A,{fullWidth:!0,size:"small",children:[(0,f.jsx)(o.A,{children:x}),(0,f.jsx)(a.A,{multiple:!0,value:Array.isArray(p)?p:[],onChange:e=>D(l,e.target.value),input:(0,f.jsx)(n.A,{label:x}),renderValue:e=>(0,f.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>{const l=b.find((l=>l.value===e));return(0,f.jsx)(c.A,{label:l?l.label:e,size:"small"},e)}))}),children:b.map((e=>(0,f.jsx)(s.A,{value:e.value,children:e.label},e.value)))})]});case"date":return(0,f.jsx)(j.$,{dateAdapter:A.h,children:(0,f.jsx)(m.l,{label:x,value:p||null,onChange:e=>D(l,e),slotProps:{textField:{size:"small",fullWidth:!0}}})});case"number":return(0,f.jsx)(d.A,{fullWidth:!0,size:"small",label:x,type:"number",value:p,onChange:e=>D(l,e.target.value),placeholder:u});default:return(0,f.jsx)(d.A,{fullWidth:!0,size:"small",label:x,value:p,onChange:e=>D(l,e.target.value),placeholder:u})}},S=()=>Object.values(t).filter((e=>Array.isArray(e)?e.length>0:e instanceof Date||""!==e&&null!==e&&void 0!==e)).length;return(0,f.jsx)(x.A,{in:l,children:(0,f.jsxs)(h.A,{sx:{p:3,mb:3,backgroundColor:"grey.50",border:1,borderColor:"divider"},children:[(0,f.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,f.jsxs)(b.A,{variant:"h6",component:"h3",children:["Filters (",S()," active)"]}),(0,f.jsx)(u.A,{variant:"outlined",size:"small",onClick:y,disabled:0===S(),children:"Clear All"})]}),k.length>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(b.A,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Quick Filters"}),(0,f.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:k.map((e=>(0,f.jsx)(c.A,{label:e.label,onClick:()=>C(e),variant:"outlined",size:"small",sx:{"&:hover":{backgroundColor:"primary.light",color:"white"}}},e.key)))}),(0,f.jsx)(p.A,{sx:{mb:2}})]}),(0,f.jsx)(g.A,{container:!0,spacing:2,children:w.map((e=>(0,f.jsx)(g.A,{item:!0,xs:12,sm:6,md:4,children:F(e)},e.key)))}),S()>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.A,{sx:{my:2}}),(0,f.jsx)(b.A,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Active Filters"}),(0,f.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Object.entries(t).map((e=>{let[l,t]=e;if(Array.isArray(t)&&0===t.length)return null;if(!t||""===t)return null;const r=w.find((e=>e.key===l));if(!r)return null;let o=t;if(Array.isArray(t))o=t.map((e=>{var l;const t=null===(l=r.options)||void 0===l?void 0:l.find((l=>l.value===e));return t?t.label:e})).join(", ");else if(r.options){const e=r.options.find((e=>e.value===t));o=e?e.label:t}else t instanceof Date&&(o=t.toLocaleDateString());return(0,f.jsx)(c.A,{label:"".concat(r.label,": ").concat(o),onDelete:()=>(e=>{v(e,"")})(l),color:"primary",variant:"outlined",size:"small"},l)})).filter(Boolean)})]})]})})}},82327:(e,l,t)=>{t.d(l,{A:()=>a});var r=t(99992),o=t(70579);const a=(0,r.A)((0,o.jsx)("path",{d:"M14.4 6 14 4H5v17h2v-7h5.6l.4 2h7V6z"}),"Flag")},87186:(e,l,t)=>{t.d(l,{A:()=>a});var r=t(99992),o=t(70579);const a=(0,r.A)((0,o.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow")},93201:(e,l,t)=>{t.d(l,{A:()=>a});var r=t(99992),o=t(70579);const a=(0,r.A)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle")}}]);
//# sourceMappingURL=632.e899ac1b.chunk.js.map