"use strict";(self.webpackChunkformula_project_app=self.webpackChunkformula_project_app||[]).push([[421],{62421:(e,l,s)=>{s.r(l),s.d(l,{default:()=>V});var r=s(89379),t=s(65043),a=s(91244),o=s(16128),n=s(55895),i=s(53969),c=s(83759),d=s(33539),x=s(42579),u=s(95315),h=s(57401),p=s(24244),A=s(66185),j=s(52912),m=s(53089),b=s(94799),g=s(94527),f=s(33309),y=s(12843),v=s(82327),C=s(71101),k=s(27365),w=s(27496),D=s(87186),z=s(93201),S=s(61773),F=s(51491),T=s(90160),I=s(5362),W=s(63898),L=s(69200),P=s(43900),U=s(8104),O=s(44188),_=s(82768),B=s(77539),M=s(15917),N=s(70579);const E={low:{label:"Low",color:"#27ae60",bgColor:"#eafaf1",icon:(0,N.jsx)(v.A,{})},medium:{label:"Medium",color:"#f39c12",bgColor:"#fef9e7",icon:(0,N.jsx)(v.A,{})},high:{label:"High",color:"#e67e22",bgColor:"#fef5e7",icon:(0,N.jsx)(C.A,{})},urgent:{label:"Urgent",color:"#e74c3c",bgColor:"#fdf2f2",icon:(0,N.jsx)(k.A,{})}},H={pending:{label:"To Do",color:"#f39c12",bgColor:"#fef9e7",icon:(0,N.jsx)(w.A,{})},"in-progress":{label:"In Progress",color:"#3498db",bgColor:"#ebf5fb",icon:(0,N.jsx)(D.A,{})},in_progress:{label:"In Progress",color:"#3498db",bgColor:"#ebf5fb",icon:(0,N.jsx)(D.A,{})},completed:{label:"Completed",color:"#27ae60",bgColor:"#eafaf1",icon:(0,N.jsx)(z.A,{})}};const V=function(e){let{tasks:l,projects:s,teamMembers:v=[],onUpdateTask:C,onDeleteTask:k,onAddTask:w,onViewTask:D,onEditTask:V}=e;const[Q,q]=(0,t.useState)(""),[R,$]=(0,t.useState)(!1),[X,Z]=(0,t.useState)(0),[G,J]=(0,t.useState)("dueDate"),[K,Y]=(0,t.useState)("asc"),[ee,le]=(0,t.useState)({status:"",priority:"",project:"",assignee:"",dueDateFrom:null,dueDateTo:null}),se=[{key:"status",label:"Status",type:"select",options:[{value:"pending",label:"To Do"},{value:"in-progress",label:"In Progress"},{value:"completed",label:"Completed"}]},{key:"priority",label:"Priority",type:"select",options:[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}]},{key:"project",label:"Project",type:"select",options:s.map((e=>({value:e.id,label:e.name})))},{key:"assignee",label:"Assignee",type:"select",options:v.map((e=>({value:e.id,label:e.fullName})))}],re=[{key:"overdue",label:"Overdue Tasks",filters:{status:"",dueDateTo:new Date}},{key:"today",label:"Due Today",filters:{dueDateFrom:new Date,dueDateTo:new Date}},{key:"urgent",label:"Urgent Tasks",filters:{priority:"urgent"}},{key:"completed",label:"Completed",filters:{status:"completed"}}],te=(0,t.useMemo)((()=>{let e=l.filter((e=>{var l;const s=Q.toLowerCase(),r=!Q||e.name.toLowerCase().includes(s)||(null===(l=e.description)||void 0===l?void 0:l.toLowerCase().includes(s)),t=!ee.status||e.status===ee.status,a=!ee.priority||e.priority===ee.priority,o=!ee.project||e.projectId===ee.project,n=!ee.assignee||e.assignedTo===ee.assignee;return r&&t&&a&&o&&n}));return e.sort(((e,l)=>{let s,r;switch(G){case"name":s=e.name.toLowerCase(),r=l.name.toLowerCase();break;case"dueDate":s=new Date(e.dueDate),r=new Date(l.dueDate);break;case"priority":const t={low:1,medium:2,high:3,urgent:4};s=t[e.priority],r=t[l.priority];break;default:return 0}return s<r?"asc"===K?-1:1:s>r?"asc"===K?1:-1:0})),e}),[l,Q,ee,G,K]),ae=(0,t.useMemo)((()=>{const e={pending:[],"in-progress":[],completed:[]};return te.forEach((l=>{const s="in_progress"===l.status?"in-progress":l.status;e[s]?e[s].push(l):e.pending.push(l)})),e}),[te]),oe=Object.entries(ee).filter((e=>{let[l,s]=e;return"string"===typeof s?""!==s:null!==s&&void 0!==s})).map((e=>{let[l,r]=e,t=l.charAt(0).toUpperCase()+l.slice(1).replace(/([A-Z])/g," $1"),a=r;if("project"===l){const e=s.find((e=>e.id===r));a=e?e.name:r}else if("assignee"===l){const e=v.find((e=>e.id===r));a=e?e.fullName:r}return{key:l,label:t,value:a}})),ne=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),ie=(e,l)=>{if("completed"===l)return!1;const s=new Date;return s.setHours(0,0,0,0),new Date(e)<s},ce=()=>{le({status:"",priority:"",project:"",assignee:"",dueDateFrom:null,dueDateTo:null})},de=e=>{"all"===e?ce():le((l=>(0,r.A)((0,r.A)({},l),{},{[e]:""})))},xe=()=>{(0,M.XR)(te,s,v)},ue=e=>{C(e,{status:"completed",completedAt:(new Date).toISOString()})},he=e=>{C(e,{status:"pending",completedAt:null})};return 0===l.length?(0,N.jsxs)(i.A,{children:[(0,N.jsx)(_.A,{title:"Tasks",searchValue:Q,onSearchChange:q,showFilters:R,onToggleFilters:()=>$(!R),activeFiltersCount:oe.length,onExport:xe,onAdd:w,addButtonText:"Add Task",activeFilters:oe,onClearFilter:de}),(0,N.jsxs)(i.A,{sx:{textAlign:"center",py:4},children:[(0,N.jsx)(L.A,{sx:{fontSize:64,color:"text.secondary",mb:2}}),(0,N.jsx)(n.A,{variant:"body1",color:"text.secondary",children:"No tasks added yet. Create a project and add your first task!"})]})]}):(0,N.jsxs)(i.A,{children:[(0,N.jsx)(_.A,{title:"Tasks",searchValue:Q,onSearchChange:q,showFilters:R,onToggleFilters:()=>$(!R),activeFiltersCount:oe.length,onExport:xe,onAdd:w,addButtonText:"Add Task",activeFilters:oe,onClearFilter:de}),(0,N.jsx)(B.A,{show:R,filters:ee,onFilterChange:(e,l)=>{le((s=>(0,r.A)((0,r.A)({},s),{},{[e]:l})))},onClearFilters:ce,onApplyQuickFilter:e=>{le((l=>(0,r.A)((0,r.A)({},l),e.filters)))},filterConfig:se,quickFilters:re}),(0,N.jsx)(i.A,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,N.jsxs)(f.A,{value:X,onChange:(e,l)=>Z(l),children:[(0,N.jsx)(y.A,{icon:(0,N.jsx)(P.A,{}),label:"List"}),(0,N.jsx)(y.A,{icon:(0,N.jsx)(U.A,{}),label:"Board"}),(0,N.jsx)(y.A,{icon:(0,N.jsx)(O.A,{}),label:"Calendar"})]})}),0===X&&(0,N.jsx)(u.A,{children:te.map((e=>{const l=s.find((l=>l.id===e.projectId)),r=E[e.priority],a=ie(e.dueDate,e.status),o=v.find((l=>l.id===e.assignedTo)),u=H[e.status]||H.pending;return(0,N.jsx)(t.Fragment,{children:(0,N.jsxs)(h.Ay,{sx:{borderLeft:"4px solid ".concat(a?"#e74c3c":r.color),backgroundColor:a?"#fff5f5":"white",mb:1,borderRadius:1,boxShadow:1},children:[(0,N.jsx)(p.A,{children:o?(0,N.jsx)(d.A,{sx:{bgcolor:o.roleColor},children:o.initials}):(0,N.jsx)(d.A,{children:(0,N.jsx)(T.A,{})})}),(0,N.jsx)(A.A,{primary:(0,N.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,N.jsx)(n.A,{variant:"subtitle1",sx:{fontWeight:600},children:e.name}),(0,N.jsx)(c.A,{label:r.label,size:"small",sx:{backgroundColor:r.bgColor,color:r.color,fontSize:"0.7rem"}}),(0,N.jsx)(c.A,{label:u.label,size:"small",sx:{backgroundColor:u.bgColor,color:u.color,fontSize:"0.7rem"}}),a&&(0,N.jsx)(c.A,{label:"Overdue",size:"small",sx:{backgroundColor:"#fdf2f2",color:"#e74c3c",fontSize:"0.7rem"}})]}),secondary:(0,N.jsxs)(i.A,{children:[(0,N.jsxs)(n.A,{variant:"body2",color:"text.secondary",children:["Project: ",l?l.name:"Unknown Project"]}),(0,N.jsxs)(n.A,{variant:"body2",color:"text.secondary",children:["Assigned to: ",o?o.fullName:"Unassigned"]}),(0,N.jsxs)(n.A,{variant:"body2",color:a?"error":"text.secondary",children:["Due: ",ne(e.dueDate)]})]})}),(0,N.jsx)(j.A,{children:(0,N.jsxs)(i.A,{sx:{display:"flex",gap:.5},children:[(0,N.jsx)(x.A,{size:"small",onClick:()=>V&&V(e),children:(0,N.jsx)(S.A,{fontSize:"small"})}),"completed"===e.status?(0,N.jsx)(x.A,{size:"small",color:"warning",onClick:()=>he(e.id),children:(0,N.jsx)(F.A,{fontSize:"small"})}):(0,N.jsx)(x.A,{size:"small",color:"success",onClick:()=>ue(e.id),children:(0,N.jsx)(z.A,{fontSize:"small"})}),(0,N.jsx)(x.A,{size:"small",color:"error",onClick:()=>{return l=e.id,s=e.name,void(window.confirm('Are you sure you want to delete "'.concat(s,'"?'))&&k(l));var l,s},children:(0,N.jsx)(I.A,{fontSize:"small"})})]})})]})},e.id)}))}),1===X&&(0,N.jsx)(m.A,{container:!0,spacing:2,children:Object.entries(ae).map((e=>{let[l,r]=e;const t=H[l]||H.pending;return(0,N.jsx)(m.A,{item:!0,xs:12,md:4,children:(0,N.jsxs)(b.A,{sx:{p:2,minHeight:400},children:[(0,N.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[t.icon,(0,N.jsx)(n.A,{variant:"h6",sx:{fontWeight:600},children:t.label}),(0,N.jsx)(c.A,{label:r.length,size:"small",sx:{backgroundColor:t.bgColor,color:t.color}})]}),(0,N.jsx)(g.A,{sx:{mb:2}}),(0,N.jsx)(i.A,{children:r.map((e=>(e=>{const l=s.find((l=>l.id===e.projectId)),r=E[e.priority],t=ie(e.dueDate,e.status),u=v.find((l=>l.id===e.assignedTo));return(0,N.jsx)(a.A,{sx:{mb:1,borderLeft:"4px solid ".concat(t?"#e74c3c":r.color),backgroundColor:t?"#fff5f5":"white","&:hover":{boxShadow:2}},children:(0,N.jsxs)(o.A,{sx:{p:2,"&:last-child":{pb:2}},children:[(0,N.jsx)(n.A,{variant:"subtitle2",sx:{fontWeight:600,mb:1},children:e.name}),(0,N.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,N.jsx)(c.A,{label:r.label,size:"small",sx:{backgroundColor:r.bgColor,color:r.color,fontSize:"0.7rem"}}),t&&(0,N.jsx)(c.A,{label:"Overdue",size:"small",sx:{backgroundColor:"#fdf2f2",color:"#e74c3c",fontSize:"0.7rem"}})]}),(0,N.jsx)(n.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:l?l.name:"Unknown Project"}),(0,N.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,N.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[u&&(0,N.jsx)(d.A,{sx:{width:24,height:24,fontSize:12,bgcolor:u.roleColor},children:u.initials}),(0,N.jsx)(n.A,{variant:"caption",color:"text.secondary",children:ne(e.dueDate)})]}),(0,N.jsxs)(i.A,{sx:{display:"flex",gap:.5},children:[(0,N.jsx)(x.A,{size:"small",onClick:()=>V&&V(e),children:(0,N.jsx)(S.A,{fontSize:"small"})}),"completed"===e.status?(0,N.jsx)(x.A,{size:"small",color:"warning",onClick:()=>he(e.id),children:(0,N.jsx)(F.A,{fontSize:"small"})}):(0,N.jsx)(x.A,{size:"small",color:"success",onClick:()=>ue(e.id),children:(0,N.jsx)(z.A,{fontSize:"small"})})]})]})]})},e.id)})(e)))})]})},l)}))}),2===X&&(0,N.jsxs)(i.A,{sx:{p:2},children:[(0,N.jsx)(n.A,{variant:"h6",sx:{mb:2},children:"Tasks by Due Date"}),(0,N.jsx)(m.A,{container:!0,spacing:2,children:te.map((e=>{const l=s.find((l=>l.id===e.projectId)),r=E[e.priority],t=ie(e.dueDate,e.status),c=v.find((l=>l.id===e.assignedTo));return(0,N.jsx)(m.A,{item:!0,xs:12,sm:6,md:4,children:(0,N.jsx)(a.A,{sx:{borderLeft:"4px solid ".concat(t?"#e74c3c":r.color),backgroundColor:t?"#fff5f5":"white"},children:(0,N.jsxs)(o.A,{children:[(0,N.jsx)(n.A,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:e.name}),(0,N.jsx)(n.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:l?l.name:"Unknown Project"}),(0,N.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,N.jsx)(W.A,{fontSize:"small"}),(0,N.jsxs)(n.A,{variant:"body2",color:t?"error":"text.secondary",children:["Due: ",ne(e.dueDate)]})]}),c&&(0,N.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,N.jsx)(d.A,{sx:{width:20,height:20,fontSize:12,bgcolor:c.roleColor},children:c.initials}),(0,N.jsx)(n.A,{variant:"body2",color:"text.secondary",children:c.fullName})]})]})})},e.id)}))})]})]})}},77539:(e,l,s)=>{s.d(l,{A:()=>y});s(65043);var r=s(10256),t=s(79067),a=s(84938),o=s(36196),n=s(47471),i=s(53969),c=s(83759),d=s(24343),x=s(19e3),u=s(94799),h=s(55895),p=s(41859),A=s(94527),j=s(53089),m=s(53541),b=s(24793),g=s(5984),f=s(70579);const y=e=>{let{show:l,filters:s,onFilterChange:y,onClearFilters:v,onApplyQuickFilter:C,filterConfig:k,quickFilters:w=[]}=e;const D=(e,l)=>{y(e,l)},z=e=>{const{key:l,label:x,type:u,options:h,placeholder:p}=e,A=s[l]||"";switch(u){case"select":return(0,f.jsxs)(r.A,{fullWidth:!0,size:"small",children:[(0,f.jsx)(t.A,{children:x}),(0,f.jsxs)(a.A,{value:A,onChange:e=>D(l,e.target.value),input:(0,f.jsx)(o.A,{label:x}),children:[(0,f.jsxs)(n.A,{value:"",children:["All ",x]}),h.map((e=>(0,f.jsx)(n.A,{value:e.value,children:e.label},e.value)))]})]});case"multiselect":return(0,f.jsxs)(r.A,{fullWidth:!0,size:"small",children:[(0,f.jsx)(t.A,{children:x}),(0,f.jsx)(a.A,{multiple:!0,value:Array.isArray(A)?A:[],onChange:e=>D(l,e.target.value),input:(0,f.jsx)(o.A,{label:x}),renderValue:e=>(0,f.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>{const l=h.find((l=>l.value===e));return(0,f.jsx)(c.A,{label:l?l.label:e,size:"small"},e)}))}),children:h.map((e=>(0,f.jsx)(n.A,{value:e.value,children:e.label},e.value)))})]});case"date":return(0,f.jsx)(b.$,{dateAdapter:g.h,children:(0,f.jsx)(m.l,{label:x,value:A||null,onChange:e=>D(l,e),slotProps:{textField:{size:"small",fullWidth:!0}}})});case"number":return(0,f.jsx)(d.A,{fullWidth:!0,size:"small",label:x,type:"number",value:A,onChange:e=>D(l,e.target.value),placeholder:p});default:return(0,f.jsx)(d.A,{fullWidth:!0,size:"small",label:x,value:A,onChange:e=>D(l,e.target.value),placeholder:p})}},S=()=>Object.values(s).filter((e=>Array.isArray(e)?e.length>0:e instanceof Date||""!==e&&null!==e&&void 0!==e)).length;return(0,f.jsx)(x.A,{in:l,children:(0,f.jsxs)(u.A,{sx:{p:3,mb:3,backgroundColor:"grey.50",border:1,borderColor:"divider"},children:[(0,f.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,f.jsxs)(h.A,{variant:"h6",component:"h3",children:["Filters (",S()," active)"]}),(0,f.jsx)(p.A,{variant:"outlined",size:"small",onClick:v,disabled:0===S(),children:"Clear All"})]}),w.length>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h.A,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Quick Filters"}),(0,f.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:w.map((e=>(0,f.jsx)(c.A,{label:e.label,onClick:()=>C(e),variant:"outlined",size:"small",sx:{"&:hover":{backgroundColor:"primary.light",color:"white"}}},e.key)))}),(0,f.jsx)(A.A,{sx:{mb:2}})]}),(0,f.jsx)(j.A,{container:!0,spacing:2,children:k.map((e=>(0,f.jsx)(j.A,{item:!0,xs:12,sm:6,md:4,children:z(e)},e.key)))}),S()>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(A.A,{sx:{my:2}}),(0,f.jsx)(h.A,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Active Filters"}),(0,f.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Object.entries(s).map((e=>{let[l,s]=e;if(Array.isArray(s)&&0===s.length)return null;if(!s||""===s)return null;const r=k.find((e=>e.key===l));if(!r)return null;let t=s;if(Array.isArray(s))t=s.map((e=>{var l;const s=null===(l=r.options)||void 0===l?void 0:l.find((l=>l.value===e));return s?s.label:e})).join(", ");else if(r.options){const e=r.options.find((e=>e.value===s));t=e?e.label:s}else s instanceof Date&&(t=s.toLocaleDateString());return(0,f.jsx)(c.A,{label:"".concat(r.label,": ").concat(t),onDelete:()=>(e=>{y(e,"")})(l),color:"primary",variant:"outlined",size:"small"},l)})).filter(Boolean)})]})]})})}}}]);
//# sourceMappingURL=421.63c64f56.chunk.js.map