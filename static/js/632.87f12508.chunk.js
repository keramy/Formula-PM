"use strict";(self.webpackChunkformula_project_app=self.webpackChunkformula_project_app||[]).push([[185,632],{7762:(e,t,l)=>{l.d(t,{A:()=>n});var o=l(99992),r=l(70579);const n=(0,o.A)((0,r.jsx)("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree")},8632:(e,t,l)=>{l.r(t),l.d(t,{default:()=>S});var o=l(89379),r=l(65043),n=l(53969),a=l(55895),s=l(53089),i=l(91244),c=l(16128),d=l(83759),h=l(42579),x=l(26020),u=l(82327),p=l(71101),b=l(27365),g=l(27496),m=l(87186),A=l(93201),j=l(69200),f=l(3665),y=l(61773),v=l(82768),C=l(77539),w=l(35771),D=l(50185),k=l(70579);const S=e=>{let{projects:t,tasks:l,clients:S=[],teamMembers:F=[],onDeleteProject:z,onEditProject:M,onViewProject:E,onManageScope:T,onViewTask:W,onEditTask:I,onUpdateTask:P,currentUserId:H=1008}=e;const[N,V]=(0,r.useState)(""),[L,O]=(0,r.useState)(!1),[R,B]=(0,r.useState)("card"),[U,Y]=(0,r.useState)({status:"",type:"",client:"",startDateFrom:null,startDateTo:null,endDateFrom:null,endDateTo:null,budgetFrom:"",budgetTo:""}),_=t.filter((e=>e.projectManager===H)),q=l.filter((e=>e.assignedTo===H)),G=[{key:"status",label:"Status",type:"select",options:[{value:"on-tender",label:"On Tender"},{value:"awarded",label:"Awarded"},{value:"on-hold",label:"On Hold"},{value:"not-awarded",label:"Not Awarded"},{value:"active",label:"Active"},{value:"completed",label:"Completed"}]},{key:"type",label:"Type",type:"select",options:[{value:"general-contractor",label:"General Contractor"},{value:"millwork",label:"Millwork"},{value:"electrical",label:"Electrical"},{value:"mep",label:"MEP"},{value:"management",label:"Management"}]},{key:"client",label:"Client",type:"select",options:S.map((e=>({value:e.id,label:e.companyName})))},{key:"startDateFrom",label:"Start Date From",type:"date"},{key:"startDateTo",label:"Start Date To",type:"date"},{key:"endDateFrom",label:"End Date From",type:"date"},{key:"endDateTo",label:"End Date To",type:"date"},{key:"budgetFrom",label:"Budget From",type:"number",placeholder:"Min budget"},{key:"budgetTo",label:"Budget To",type:"number",placeholder:"Max budget"}],Q=[{label:"Active Projects",filters:{status:"active"}},{label:"On Tender",filters:{status:"on-tender"}},{label:"This Month",filters:{startDateFrom:new Date((new Date).getFullYear(),(new Date).getMonth(),1),startDateTo:new Date((new Date).getFullYear(),(new Date).getMonth()+1,0)}},{label:"Overdue",filters:{}}],$=(0,r.useMemo)((()=>_.filter((e=>{const t=N.toLowerCase(),l=!N||e.name.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t),o=!U.status||e.status===U.status,r=!U.type||e.type===U.type,n=!U.client||e.clientId===parseInt(U.client),a=e.startDate?new Date(e.startDate):null,s=e.endDate?new Date(e.endDate):null,i=!U.startDateFrom||a&&a>=U.startDateFrom,c=!U.startDateTo||a&&a<=U.startDateTo,d=!U.endDateFrom||s&&s>=U.endDateFrom,h=!U.endDateTo||s&&s<=U.endDateTo,x=e.budget?parseFloat(e.budget):0,u=!U.budgetFrom||x>=parseFloat(U.budgetFrom),p=!U.budgetTo||x<=parseFloat(U.budgetTo);return l&&o&&r&&n&&i&&c&&d&&h&&u&&p}))),[_,N,U]),J=Object.entries(U).filter((e=>{let[t,l]=e;return"string"===typeof l?""!==l:l instanceof Date||null!==l&&void 0!==l})).map((e=>{var t;let[l,o]=e;return{key:l,label:(null===(t=G.find((e=>e.key===l)))||void 0===t?void 0:t.label)||l,value:o instanceof Date?o.toLocaleDateString():o}})),K=()=>{Y({status:"",type:"",client:"",startDateFrom:null,startDateTo:null,endDateFrom:null,endDateTo:null,budgetFrom:"",budgetTo:""})},X=e=>{"all"===e?K():e.includes("Date")?Y((t=>(0,o.A)((0,o.A)({},t),{},{[e]:null}))):Y((t=>(0,o.A)((0,o.A)({},t),{},{[e]:""})))},Z=()=>{console.log("Export my projects:",$)},ee={low:{label:"Low",color:"#27ae60",bgColor:"#eafaf1",icon:(0,k.jsx)(u.A,{})},medium:{label:"Medium",color:"#f39c12",bgColor:"#fef9e7",icon:(0,k.jsx)(u.A,{})},high:{label:"High",color:"#e67e22",bgColor:"#fef5e7",icon:(0,k.jsx)(p.A,{})},urgent:{label:"Urgent",color:"#e74c3c",bgColor:"#fdf2f2",icon:(0,k.jsx)(b.A,{})}},te={pending:{label:"To Do",color:"#f39c12",bgColor:"#fef9e7",icon:(0,k.jsx)(g.A,{})},"in-progress":{label:"In Progress",color:"#3498db",bgColor:"#ebf5fb",icon:(0,k.jsx)(m.A,{})},in_progress:{label:"In Progress",color:"#3498db",bgColor:"#ebf5fb",icon:(0,k.jsx)(m.A,{})},completed:{label:"Done",color:"#27ae60",bgColor:"#eafaf1",icon:(0,k.jsx)(A.A,{})}},le=e=>{const l=t.find((t=>t.id===e));return l?l.name:"Unknown Project"},oe=e=>{const t=new Date(e);return t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==(new Date).getFullYear()?"numeric":void 0})};return 0===_.length&&0===q.length?(0,k.jsxs)(n.A,{children:[(0,k.jsx)(v.A,{title:"My Work",searchValue:N,onSearchChange:V,showFilters:L,onToggleFilters:()=>O(!L),activeFiltersCount:J.length,viewMode:R,onViewModeChange:B,onExport:Z,showAdd:!1,activeFilters:J,onClearFilter:X}),(0,k.jsxs)(n.A,{sx:{textAlign:"center",py:4},children:[(0,k.jsx)(j.A,{sx:{fontSize:64,color:"text.secondary",mb:2}}),(0,k.jsx)(a.A,{variant:"body1",color:"text.secondary",children:"No projects or tasks assigned to you yet."})]})]}):(0,k.jsxs)(n.A,{children:[(0,k.jsx)(v.A,{title:"My Work",subtitle:"".concat($.length," projects \u2022 ").concat(q.length," tasks"),searchValue:N,onSearchChange:V,showFilters:L,onToggleFilters:()=>O(!L),activeFiltersCount:J.length,viewMode:R,onViewModeChange:B,onExport:Z,showAdd:!1,activeFilters:J,onClearFilter:X}),(0,k.jsx)(C.A,{show:L,filters:U,onFilterChange:(e,t)=>{Y((l=>(0,o.A)((0,o.A)({},l),{},{[e]:t})))},onClearFilters:K,onApplyQuickFilter:e=>{Y((t=>(0,o.A)((0,o.A)({},t),e.filters)))},filterConfig:G,quickFilters:Q}),q.length>0&&(0,k.jsxs)(n.A,{sx:{mb:4},children:[(0,k.jsxs)(a.A,{variant:"h6",sx:{mb:2,fontWeight:600,color:"#2C3E50"},children:["\ud83d\udccb My Tasks (",q.length,")"]}),(0,k.jsx)(s.A,{container:!0,spacing:2,children:q.slice(0,6).map((e=>{const t=ee[e.priority]||ee.medium,l=te[e.status]||te.pending,o=(e=>{if("completed"===e.status)return!1;const t=new Date;return t.setHours(0,0,0,0),new Date(e.dueDate)<t})(e);return(0,k.jsx)(s.A,{item:!0,xs:12,sm:6,md:4,children:(0,k.jsx)(i.A,{elevation:0,sx:{border:"1px solid #E9ECEF",borderRadius:2,borderLeft:"4px solid ".concat(t.color),"&:hover":{boxShadow:2,transform:"translateY(-2px)"},transition:"all 0.2s ease"},children:(0,k.jsxs)(c.A,{sx:{p:2},children:[(0,k.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[(0,k.jsx)(a.A,{variant:"body1",sx:{fontWeight:600,flex:1},children:e.name}),(0,k.jsx)(d.A,{size:"small",label:l.label,sx:{backgroundColor:l.bgColor,color:l.color,fontWeight:600,ml:1}})]}),e.description&&(0,k.jsx)(a.A,{variant:"body2",color:"textSecondary",sx:{mb:1.5},children:e.description}),(0,k.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,k.jsx)(d.A,{size:"small",label:le(e.projectId),sx:{backgroundColor:"#F8F9FA",color:"#7F8C8D"}}),(0,k.jsx)(d.A,{size:"small",label:t.label,sx:{backgroundColor:t.bgColor,color:t.color,fontWeight:600}})]}),(0,k.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,k.jsxs)(a.A,{variant:"caption",sx:{color:o?"#e74c3c":"text.secondary",fontWeight:o?600:400},children:["Due: ",oe(e.dueDate),o&&" (Overdue)"]}),(0,k.jsxs)(n.A,{sx:{display:"flex",gap:.5},children:[(0,k.jsx)(h.A,{size:"small",onClick:()=>W&&W(e),sx:{color:"#3498db"},children:(0,k.jsx)(f.A,{fontSize:"small"})}),(0,k.jsx)(h.A,{size:"small",onClick:()=>I&&I(e),sx:{color:"#f39c12"},children:(0,k.jsx)(y.A,{fontSize:"small"})})]})]}),void 0!==e.progress&&e.progress>0&&(0,k.jsxs)(n.A,{sx:{mt:1},children:[(0,k.jsx)(x.A,{variant:"determinate",value:e.progress,sx:{height:6,borderRadius:3,backgroundColor:"#E9ECEF"}}),(0,k.jsxs)(a.A,{variant:"caption",sx:{mt:.5,display:"block"},children:[e.progress,"% complete"]})]})]})})},e.id)}))}),q.length>6&&(0,k.jsx)(n.A,{sx:{textAlign:"center",mt:2},children:(0,k.jsxs)(a.A,{variant:"body2",color:"textSecondary",children:["Showing 6 of ",q.length," tasks. View all tasks in the Tasks section."]})})]}),_.length>0&&(0,k.jsxs)(n.A,{children:[(0,k.jsxs)(a.A,{variant:"h6",sx:{mb:2,fontWeight:600,color:"#2C3E50"},children:["\ud83c\udfaf My Projects (",$.length,")"]}),"table"===R&&(0,k.jsx)(D.default,{projects:$,clients:S,teamMembers:F,onEditProject:M,onDeleteProject:z,onViewProject:E,onManageScope:T}),"card"===R&&(0,k.jsx)(w.default,{projects:$,tasks:l,clients:S,onDeleteProject:z})]})]})}},19e3:(e,t,l)=>{l.d(t,{A:()=>S});var o=l(89379),r=l(80045),n=l(65043),a=l(58387),s=l(88692),i=l(92448),c=l(31807),d=l(58128),h=l(60267),x=l(51612),u=l(28301),p=l(85579),b=l(76906),g=l(38348),m=l(79857),A=l(86061);function j(e){return(0,A.Ay)("MuiCollapse",e)}(0,m.A)("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);var f=l(70579);const y=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],v=["ownerState"],C=(0,d.Ay)("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:l}=e;return[t.root,t[l.orientation],"entered"===l.state&&t.entered,"exited"===l.state&&!l.in&&"0px"===l.collapsedSize&&t.hidden]}})((0,x.A)((e=>{let{theme:t}=e;return{height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:e=>{let{ownerState:t}=e;return"exited"===t.state&&!t.in&&"0px"===t.collapsedSize},style:{visibility:"hidden"}}]}}))),w=(0,d.Ay)("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),D=(0,d.Ay)("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),k=n.forwardRef((function(e,t){const l=(0,u.b)({props:e,name:"MuiCollapse"}),{addEndListener:d,children:x,className:m,collapsedSize:A="0px",component:k,easing:S,in:F,onEnter:z,onEntered:M,onEntering:E,onExit:T,onExited:W,onExiting:I,orientation:P="vertical",style:H,timeout:N=p.p0.standard,TransitionComponent:V=s.Ay}=l,L=(0,r.A)(l,y),O=(0,o.A)((0,o.A)({},l),{},{orientation:P,collapsedSize:A}),R=(e=>{const{orientation:t,classes:l}=e,o={root:["root","".concat(t)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(t)],wrapperInner:["wrapperInner","".concat(t)]};return(0,c.A)(o,j,l)})(O),B=(0,h.A)(),U=(0,i.A)(),Y=n.useRef(null),_=n.useRef(),q="number"===typeof A?"".concat(A,"px"):A,G="horizontal"===P,Q=G?"width":"height",$=n.useRef(null),J=(0,g.A)(t,$),K=e=>t=>{if(e){const l=$.current;void 0===t?e(l):e(l,t)}},X=()=>Y.current?Y.current[G?"clientWidth":"clientHeight"]:0,Z=K(((e,t)=>{Y.current&&G&&(Y.current.style.position="absolute"),e.style[Q]=q,z&&z(e,t)})),ee=K(((e,t)=>{const l=X();Y.current&&G&&(Y.current.style.position="");const{duration:o,easing:r}=(0,b.c)({style:H,timeout:N,easing:S},{mode:"enter"});if("auto"===N){const t=B.transitions.getAutoHeightDuration(l);e.style.transitionDuration="".concat(t,"ms"),_.current=t}else e.style.transitionDuration="string"===typeof o?o:"".concat(o,"ms");e.style[Q]="".concat(l,"px"),e.style.transitionTimingFunction=r,E&&E(e,t)})),te=K(((e,t)=>{e.style[Q]="auto",M&&M(e,t)})),le=K((e=>{e.style[Q]="".concat(X(),"px"),T&&T(e)})),oe=K(W),re=K((e=>{const t=X(),{duration:l,easing:o}=(0,b.c)({style:H,timeout:N,easing:S},{mode:"exit"});if("auto"===N){const l=B.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(l,"ms"),_.current=l}else e.style.transitionDuration="string"===typeof l?l:"".concat(l,"ms");e.style[Q]=q,e.style.transitionTimingFunction=o,I&&I(e)}));return(0,f.jsx)(V,(0,o.A)((0,o.A)({in:F,onEnter:Z,onEntered:te,onEntering:ee,onExit:le,onExited:oe,onExiting:re,addEndListener:e=>{"auto"===N&&U.start(_.current||0,e),d&&d($.current,e)},nodeRef:$,timeout:"auto"===N?null:N},L),{},{children:(e,t)=>{let{ownerState:l}=t,n=(0,r.A)(t,v);return(0,f.jsx)(C,(0,o.A)((0,o.A)({as:k,className:(0,a.A)(R.root,m,{entered:R.entered,exited:!F&&"0px"===q&&R.hidden}[e]),style:(0,o.A)({[G?"minWidth":"minHeight"]:q},H),ref:J,ownerState:(0,o.A)((0,o.A)({},O),{},{state:e})},n),{},{children:(0,f.jsx)(w,{ownerState:(0,o.A)((0,o.A)({},O),{},{state:e}),className:R.wrapper,ref:Y,children:(0,f.jsx)(D,{ownerState:(0,o.A)((0,o.A)({},O),{},{state:e}),className:R.wrapperInner,children:x})})}))}}))}));k&&(k.muiSupportAuto=!0);const S=k},27365:(e,t,l)=>{l.d(t,{A:()=>n});var o=l(99992),r=l(70579);const n=(0,o.A)([(0,r.jsx)("circle",{cx:"12",cy:"19",r:"2"},"0"),(0,r.jsx)("path",{d:"M10 3h4v12h-4z"},"1")],"PriorityHigh")},27496:(e,t,l)=>{l.d(t,{A:()=>n});var o=l(99992),r=l(70579);const n=(0,o.A)([(0,r.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,r.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule")},35771:(e,t,l)=>{l.r(t),l.d(t,{default:()=>v});l(65043);var o=l(53969),r=l(55895),n=l(53089),a=l(91244),s=l(16128),i=l(83759),c=l(42579),d=l(41859),h=l(99992),x=l(70579);const u=(0,h.A)((0,x.jsx)("path",{d:"m22.7 19-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4"}),"Build"),p=(0,h.A)((0,x.jsx)("path",{d:"M19.73 14.23 7 1.5 3.11 5.39l8.13 11.67c-.78.78-.78 2.05 0 2.83l1.41 1.41c.78.78 2.05.78 2.83 0l4.24-4.24c.79-.78.79-2.05.01-2.83m-5.66 5.65-1.41-1.41 4.24-4.24 1.41 1.41z"}),"Carpenter"),b=(0,h.A)([(0,x.jsx)("path",{d:"M21 14c0-.55-.45-1-1-1h-2v2h2c.55 0 1-.45 1-1m-1 3h-2v2h2c.55 0 1-.45 1-1s-.45-1-1-1m-8-3h-2v4h2c0 1.1.9 2 2 2h3v-8h-3c-1.1 0-2 .9-2 2"},"0"),(0,x.jsx)("path",{d:"M5 13c0-1.1.9-2 2-2h1.5c1.93 0 3.5-1.57 3.5-3.5S10.43 4 8.5 4H5c-.55 0-1 .45-1 1s.45 1 1 1h3.5c.83 0 1.5.67 1.5 1.5S9.33 9 8.5 9H7c-2.21 0-4 1.79-4 4s1.79 4 4 4h2v-2H7c-1.1 0-2-.9-2-2"},"1")],"ElectricalServices"),g=(0,h.A)((0,x.jsx)("path",{d:"M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4m13.1-8.16c.01-.11.02-.22.02-.34s-.01-.23-.03-.34l.74-.58c.07-.05.08-.15.04-.22l-.7-1.21c-.04-.08-.14-.1-.21-.08l-.86.35c-.18-.14-.38-.25-.59-.34l-.13-.93c-.02-.09-.09-.15-.18-.15h-1.4c-.09 0-.16.06-.17.15l-.13.93c-.21.09-.41.21-.59.34l-.87-.35c-.08-.03-.17 0-.21.08l-.7 1.21c-.04.08-.03.17.04.22l.74.58c-.02.11-.03.23-.03.34s.01.23.03.34l-.74.58c-.07.05-.08.15-.04.22l.7 1.21c.04.08.14.1.21.08l.87-.35c.18.14.38.25.59.34l.13.93c.01.09.08.15.17.15h1.4c.09 0 .16-.06.17-.15l.13-.93c.21-.09.41-.21.59-.34l.87.35c.08.03.17 0 .21-.08l.7-1.21c.04-.08.03-.17-.04-.22zm-2.6.91c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25m.42 3.93-.5-.87c-.03-.06-.1-.08-.15-.06l-.62.25q-.195-.15-.42-.24l-.09-.66c-.02-.06-.08-.1-.14-.1h-1c-.06 0-.11.04-.12.11l-.09.66c-.15.06-.29.15-.42.24l-.62-.25c-.06-.02-.12 0-.15.06l-.5.87c-.03.06-.02.12.03.16l.53.41c-.01.08-.02.16-.02.24s.01.17.02.24l-.53.41c-.05.04-.06.11-.03.16l.5.87c.03.06.1.08.15.06l.62-.25q.195.15.42.24l.09.66c.01.07.06.11.12.11h1c.06 0 .12-.04.12-.11l.09-.66c.15-.06.29-.15.42-.24l.62.25c.06.02.12 0 .15-.06l.5-.87c.03-.06.02-.12-.03-.16l-.52-.41c.01-.08.02-.16.02-.24s-.01-.17-.02-.24l.53-.41c.05-.04.06-.11.04-.17m-2.42 1.65c-.46 0-.83-.38-.83-.83 0-.46.38-.83.83-.83s.83.38.83.83c0 .46-.37.83-.83.83M4.74 9h8.53c.27 0 .49-.22.49-.49v-.02c0-.27-.22-.49-.49-.49H13c0-1.48-.81-2.75-2-3.45v.95c0 .28-.22.5-.5.5s-.5-.22-.5-.5V4.14C9.68 4.06 9.35 4 9 4s-.68.06-1 .14V5.5c0 .28-.22.5-.5.5S7 5.78 7 5.5v-.95C5.81 5.25 5 6.52 5 8h-.26c-.27 0-.49.22-.49.49v.03c0 .26.22.48.49.48M9 13c1.86 0 3.41-1.28 3.86-3H5.14c.45 1.72 2 3 3.86 3"}),"Engineering");var m=l(70923),A=l(5362),j=l(63898);const f={"general-contractor":{label:"General Contractor",icon:(0,x.jsx)(u,{}),color:"#e67e22",bgColor:"#fef5e7"},"fit-out":{label:"Fit-out (Legacy)",icon:(0,x.jsx)(u,{}),color:"#e67e22",bgColor:"#fef5e7"},millwork:{label:"Millwork",icon:(0,x.jsx)(p,{}),color:"#8e44ad",bgColor:"#f4ecf7"},electrical:{label:"Electrical",icon:(0,x.jsx)(b,{}),color:"#f1c40f",bgColor:"#fffbf0"},mep:{label:"MEP",icon:(0,x.jsx)(g,{}),color:"#1abc9c",bgColor:"#e8f8f5"},management:{label:"Management",icon:(0,x.jsx)(m.A,{}),color:"#37444B",bgColor:"#f5f5f5"}},y={"on-tender":{label:"On Tender",color:"#3498db",bgColor:"#ebf3fd"},awarded:{label:"Awarded",color:"#27ae60",bgColor:"#eafaf1"},"on-hold":{label:"On Hold",color:"#f39c12",bgColor:"#fef9e7"},"not-awarded":{label:"Not Awarded",color:"#e74c3c",bgColor:"#fdedec"},active:{label:"Active",color:"#9b59b6",bgColor:"#f4ecf7"},completed:{label:"Completed",color:"#2c3e50",bgColor:"#eaeded"}};const v=function(e){let{projects:t,tasks:l,clients:h=[],onDeleteProject:p,onManageScope:b}=e;if(0===t.length)return(0,x.jsx)(o.A,{sx:{textAlign:"center",py:4},children:(0,x.jsx)(r.A,{variant:"body1",color:"text.secondary",children:"No projects created yet. Create your first project to get started!"})});const g=e=>{const t=h.find((t=>t.id===e));return t?t.companyName:"No Client Assigned"},v=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,x.jsx)(n.A,{container:!0,spacing:3,children:t.map((e=>{const t=f[e.type]||{label:"General Contractor",icon:(0,x.jsx)(u,{}),color:"#e67e22",bgColor:"#fef5e7"},h=(e=>{const t=l.filter((t=>t.projectId===e));if(0===t.length)return 0;const o=t.filter((e=>"completed"===e.status)).length;return Math.round(o/t.length*100)})(e.id),C=(e=>{const t=l.filter((t=>t.projectId===e)),o=t.filter((e=>"completed"===e.status)).length,r=t.filter((e=>{const t=new Date;return t.setHours(0,0,0,0),"completed"!==e.status&&new Date(e.dueDate)<t})).length;return{total:t.length,completed:o,pending:t.length-o,overdue:r}})(e.id),w=(e=>e.status||"on-tender")(e),D=y[w]||{label:"On Tender",color:"#3498db",bgColor:"#ebf3fd"};return(0,x.jsx)(n.A,{item:!0,xs:12,md:6,children:(0,x.jsx)(a.A,{className:"project-card construction-card type-".concat(e.type),sx:{cursor:"pointer",position:"relative",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},onClick:()=>{},children:(0,x.jsxs)(s.A,{children:[(0,x.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,x.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,x.jsx)(o.A,{sx:{color:t.color},children:t.icon}),(0,x.jsx)(i.A,{label:t.label,size:"small",sx:{backgroundColor:t.bgColor,color:t.color,fontWeight:"bold"}})]}),(0,x.jsx)(i.A,{label:D.label,size:"small",sx:{backgroundColor:D.bgColor,color:D.color,fontWeight:"bold"}}),(0,x.jsx)(c.A,{size:"small",onClick:t=>{var l,o;t.stopPropagation(),l=e.id,o=e.name,window.confirm('Are you sure you want to delete "'.concat(o,'"? This will also delete all associated tasks.'))&&p(l)},sx:{color:"#e74c3c"},children:(0,x.jsx)(A.A,{fontSize:"small"})})]}),(0,x.jsx)(r.A,{variant:"h6",component:"h3",gutterBottom:!0,sx:{color:"#3498db",cursor:"pointer",textDecoration:"none","&:hover":{textDecoration:"underline",color:"#2980b9"}},onClick:t=>{t.stopPropagation(),b&&b(e)},children:e.name}),e.clientId&&(0,x.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,x.jsx)(m.A,{fontSize:"small",color:"action"}),(0,x.jsxs)(r.A,{variant:"body2",color:"text.secondary",children:["Client: ",g(e.clientId)]})]}),(0,x.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[(0,x.jsx)(j.A,{fontSize:"small",color:"action"}),(0,x.jsxs)(r.A,{variant:"body2",color:"text.secondary",children:[v(e.startDate)," - ",v(e.endDate)]})]}),(0,x.jsxs)(o.A,{sx:{mb:2},children:[(0,x.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,x.jsx)(r.A,{variant:"body2",color:"text.secondary",children:"Progress"}),(0,x.jsxs)(r.A,{variant:"body2",color:"text.secondary",children:[h,"%"]})]}),(0,x.jsx)("div",{className:"construction-progress",children:(0,x.jsx)("div",{className:"construction-progress-fill",style:{width:"".concat(h,"%")}})})]}),(0,x.jsx)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:(0,x.jsxs)(o.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,x.jsxs)("span",{className:"status-badge status-badge-todo",style:{fontSize:"11px",padding:"2px 6px"},children:[C.total," total"]}),(0,x.jsxs)("span",{className:"status-badge status-badge-completed",style:{fontSize:"11px",padding:"2px 6px"},children:[C.completed," done"]}),C.overdue>0&&(0,x.jsxs)("span",{className:"status-badge status-badge-cancelled",style:{fontSize:"11px",padding:"2px 6px"},children:[C.overdue," overdue"]})]})}),(0,x.jsx)(d.A,{size:"small",variant:"outlined",fullWidth:!0,onClick:e=>{e.stopPropagation()},sx:{borderRadius:"8px",textTransform:"none",fontWeight:500},children:"View Details"})]})})},e.id)}))})}},50185:(e,t,l)=>{l.r(t),l.d(t,{default:()=>E});var o=l(65043),r=l(53969),n=l(55895),a=l(94799),s=l(28259),i=l(87443),c=l(10756),d=l(86172),h=l(81341),x=l(41778),u=l(34375),p=l(33539),b=l(83759),g=l(26020),m=l(42579),A=l(62055),j=l(47471),f=l(79801),y=l(66185),v=l(70923),C=l(90160),w=l(63898),D=l(12043),k=l(3665),S=l(61773),F=l(7762),z=l(5362),M=l(70579);const E=e=>{let{projects:t=[],clients:l=[],teamMembers:E=[],onEditProject:T,onDeleteProject:W,onViewProject:I,onManageScope:P}=e;const[H,N]=(0,o.useState)("name"),[V,L]=(0,o.useState)("asc"),[O,R]=(0,o.useState)(null),[B,U]=(0,o.useState)(null),Y=e=>{const t=l.find((t=>t.id===e));return t?t.companyName:"No Client Assigned"},_=e=>{const t=E.find((t=>t.id===e));return t?t.fullName:"Unassigned"},q=e=>{if(!e)return"Not set";return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},G=o.useMemo((()=>[...t].sort(((e,t)=>{let l=e[H],o=t[H];return"client"===H&&(l=Y(e.clientId),o=Y(t.clientId)),"manager"===H&&(l=_(e.projectManager),o=_(t.projectManager)),l<o?"asc"===V?-1:1:l>o?"asc"===V?1:-1:0}))),[t,H,V,l,E]),Q=()=>{R(null),U(null)},$=e=>{if(B)switch(e){case"view":I&&I(B);break;case"edit":T&&T(B);break;case"scope":P&&P(B);break;case"delete":window.confirm('Are you sure you want to delete "'.concat(B.name,'"?'))&&W&&W(B.id)}Q()};return 0===t.length?(0,M.jsxs)(r.A,{sx:{textAlign:"center",py:8,backgroundColor:"white",borderRadius:2,border:"1px solid #E9ECEF"},children:[(0,M.jsx)(v.A,{sx:{fontSize:64,color:"#BDC3C7",mb:2}}),(0,M.jsx)(n.A,{variant:"h6",color:"textSecondary",gutterBottom:!0,children:"No Projects Found"}),(0,M.jsx)(n.A,{variant:"body2",color:"textSecondary",children:"Start by creating your first project or adjust your search filters."})]}):(0,M.jsxs)(a.A,{elevation:0,sx:{width:"100%",overflow:"hidden",border:"1px solid #E9ECEF",borderRadius:2},children:[(0,M.jsx)(s.A,{sx:{maxHeight:600},children:(0,M.jsxs)(i.A,{stickyHeader:!0,children:[(0,M.jsx)(c.A,{children:(0,M.jsx)(d.A,{children:[{id:"name",label:"Project Name",sortable:!0,minWidth:200},{id:"client",label:"Client",sortable:!0,minWidth:150},{id:"type",label:"Type",sortable:!0,minWidth:130},{id:"status",label:"Status",sortable:!0,minWidth:120},{id:"manager",label:"Manager",sortable:!0,minWidth:150},{id:"startDate",label:"Start Date",sortable:!0,minWidth:120},{id:"endDate",label:"End Date",sortable:!0,minWidth:120},{id:"progress",label:"Progress",sortable:!1,minWidth:120},{id:"actions",label:"Actions",sortable:!1,minWidth:80}].map((e=>(0,M.jsx)(h.A,{sx:{minWidth:e.minWidth,backgroundColor:"#F8F9FA",fontWeight:600,color:"#2C3E50"},children:e.sortable?(0,M.jsx)(x.A,{active:H===e.id,direction:H===e.id?V:"asc",onClick:()=>{return t=e.id,L(H===t&&"asc"===V?"desc":"asc"),void N(t);var t},children:e.label}):e.label},e.id)))})}),(0,M.jsx)(u.A,{children:G.map((e=>{const t=(e=>{const t={"on-tender":{label:"On Tender",color:"#3498db",bgColor:"#ebf3fd"},awarded:{label:"Awarded",color:"#27ae60",bgColor:"#eafaf1"},"on-hold":{label:"On Hold",color:"#f39c12",bgColor:"#fef9e7"},"not-awarded":{label:"Not Awarded",color:"#e74c3c",bgColor:"#fdedec"},active:{label:"Active",color:"#9b59b6",bgColor:"#f4ecf7"},completed:{label:"Completed",color:"#2c3e50",bgColor:"#eaeded"}};return t[e]||t["on-tender"]})(e.status),l=(e=>{const t={"general-contractor":{label:"General Contractor",color:"#e67e22"},"fit-out":{label:"Fit-out",color:"#e67e22"},mep:{label:"MEP",color:"#1abc9c"},electrical:{label:"Electrical",color:"#f1c40f"},millwork:{label:"Millwork",color:"#8e44ad"},management:{label:"Management",color:"#37444B"}};return t[e]||t["general-contractor"]})(e.type),o=Math.floor(100*Math.random());return(0,M.jsxs)(d.A,{hover:!0,sx:{"&:hover":{backgroundColor:"#F8F9FA"}},children:[(0,M.jsx)(h.A,{children:(0,M.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,M.jsx)(p.A,{sx:{width:32,height:32,backgroundColor:l.color,fontSize:"0.8rem",fontWeight:600},children:e.name.substring(0,2).toUpperCase()}),(0,M.jsx)(r.A,{children:(0,M.jsx)(n.A,{variant:"body2",sx:{fontWeight:600,color:"#3498db",cursor:"pointer",textDecoration:"none","&:hover":{textDecoration:"underline",color:"#2980b9"}},onClick:()=>P&&P(e),children:e.name})})]})}),(0,M.jsx)(h.A,{children:(0,M.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,M.jsx)(v.A,{fontSize:"small",color:"action"}),(0,M.jsx)(n.A,{variant:"body2",children:Y(e.clientId)})]})}),(0,M.jsx)(h.A,{children:(0,M.jsx)(b.A,{label:l.label,size:"small",sx:{backgroundColor:"".concat(l.color,"15"),color:l.color,fontWeight:500,border:"1px solid ".concat(l.color,"30")}})}),(0,M.jsx)(h.A,{children:(0,M.jsx)(b.A,{label:t.label,size:"small",sx:{backgroundColor:t.bgColor,color:t.color,fontWeight:500}})}),(0,M.jsx)(h.A,{children:(0,M.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,M.jsx)(C.A,{fontSize:"small",color:"action"}),(0,M.jsx)(n.A,{variant:"body2",children:_(e.projectManager)})]})}),(0,M.jsx)(h.A,{children:(0,M.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,M.jsx)(w.A,{fontSize:"small",color:"action"}),(0,M.jsx)(n.A,{variant:"body2",children:q(e.startDate)})]})}),(0,M.jsx)(h.A,{children:(0,M.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,M.jsx)(w.A,{fontSize:"small",color:"action"}),(0,M.jsx)(n.A,{variant:"body2",children:q(e.endDate)})]})}),(0,M.jsx)(h.A,{children:(0,M.jsx)(r.A,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,M.jsxs)(r.A,{sx:{width:"100%"},children:[(0,M.jsx)(g.A,{variant:"determinate",value:o,sx:{height:6,borderRadius:3,backgroundColor:"#E0E0E0","& .MuiLinearProgress-bar":{backgroundColor:o>75?"#27AE60":o>50?"#F39C12":o>25?"#3498DB":"#E74C3C"}}}),(0,M.jsxs)(n.A,{variant:"caption",color:"textSecondary",children:[o,"%"]})]})})}),(0,M.jsx)(h.A,{children:(0,M.jsx)(m.A,{size:"small",onClick:t=>((e,t)=>{R(e.currentTarget),U(t)})(t,e),children:(0,M.jsx)(D.A,{})})})]},e.id)}))})]})}),(0,M.jsxs)(A.A,{anchorEl:O,open:Boolean(O),onClose:Q,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[(0,M.jsxs)(j.A,{onClick:()=>$("view"),children:[(0,M.jsx)(f.A,{children:(0,M.jsx)(k.A,{fontSize:"small"})}),(0,M.jsx)(y.A,{children:"View Details"})]}),(0,M.jsxs)(j.A,{onClick:()=>$("edit"),children:[(0,M.jsx)(f.A,{children:(0,M.jsx)(S.A,{fontSize:"small"})}),(0,M.jsx)(y.A,{children:"Edit Project"})]}),(0,M.jsxs)(j.A,{onClick:()=>$("scope"),children:[(0,M.jsx)(f.A,{children:(0,M.jsx)(F.A,{fontSize:"small"})}),(0,M.jsx)(y.A,{children:"Manage Scope"})]}),(0,M.jsxs)(j.A,{onClick:()=>$("delete"),sx:{color:"error.main"},children:[(0,M.jsx)(f.A,{children:(0,M.jsx)(z.A,{fontSize:"small",color:"error"})}),(0,M.jsx)(y.A,{children:"Delete Project"})]})]})]})}},63898:(e,t,l)=>{l.d(t,{A:()=>n});var o=l(99992),r=l(70579);const n=(0,o.A)((0,r.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday")},71101:(e,t,l)=>{l.d(t,{A:()=>n});var o=l(99992),r=l(70579);const n=(0,o.A)((0,r.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning")},77539:(e,t,l)=>{l.d(t,{A:()=>y});l(65043);var o=l(10256),r=l(79067),n=l(84938),a=l(36196),s=l(47471),i=l(53969),c=l(83759),d=l(24343),h=l(19e3),x=l(94799),u=l(55895),p=l(41859),b=l(94527),g=l(53089),m=l(53541),A=l(24793),j=l(5984),f=l(70579);const y=e=>{let{show:t,filters:l,onFilterChange:y,onClearFilters:v,onApplyQuickFilter:C,filterConfig:w,quickFilters:D=[]}=e;const k=(e,t)=>{y(e,t)},S=e=>{const{key:t,label:h,type:x,options:u,placeholder:p}=e,b=l[t]||"";switch(x){case"select":return(0,f.jsxs)(o.A,{fullWidth:!0,size:"small",children:[(0,f.jsx)(r.A,{children:h}),(0,f.jsxs)(n.A,{value:b,onChange:e=>k(t,e.target.value),input:(0,f.jsx)(a.A,{label:h}),children:[(0,f.jsxs)(s.A,{value:"",children:["All ",h]}),u.map((e=>(0,f.jsx)(s.A,{value:e.value,children:e.label},e.value)))]})]});case"multiselect":return(0,f.jsxs)(o.A,{fullWidth:!0,size:"small",children:[(0,f.jsx)(r.A,{children:h}),(0,f.jsx)(n.A,{multiple:!0,value:Array.isArray(b)?b:[],onChange:e=>k(t,e.target.value),input:(0,f.jsx)(a.A,{label:h}),renderValue:e=>(0,f.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((e=>{const t=u.find((t=>t.value===e));return(0,f.jsx)(c.A,{label:t?t.label:e,size:"small"},e)}))}),children:u.map((e=>(0,f.jsx)(s.A,{value:e.value,children:e.label},e.value)))})]});case"date":return(0,f.jsx)(A.$,{dateAdapter:j.h,children:(0,f.jsx)(m.l,{label:h,value:b||null,onChange:e=>k(t,e),slotProps:{textField:{size:"small",fullWidth:!0}}})});case"number":return(0,f.jsx)(d.A,{fullWidth:!0,size:"small",label:h,type:"number",value:b,onChange:e=>k(t,e.target.value),placeholder:p});default:return(0,f.jsx)(d.A,{fullWidth:!0,size:"small",label:h,value:b,onChange:e=>k(t,e.target.value),placeholder:p})}},F=()=>Object.values(l).filter((e=>Array.isArray(e)?e.length>0:e instanceof Date||""!==e&&null!==e&&void 0!==e)).length;return(0,f.jsx)(h.A,{in:t,children:(0,f.jsxs)(x.A,{sx:{p:3,mb:3,backgroundColor:"grey.50",border:1,borderColor:"divider"},children:[(0,f.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,f.jsxs)(u.A,{variant:"h6",component:"h3",children:["Filters (",F()," active)"]}),(0,f.jsx)(p.A,{variant:"outlined",size:"small",onClick:v,disabled:0===F(),children:"Clear All"})]}),D.length>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(u.A,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Quick Filters"}),(0,f.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:D.map((e=>(0,f.jsx)(c.A,{label:e.label,onClick:()=>C(e),variant:"outlined",size:"small",sx:{"&:hover":{backgroundColor:"primary.light",color:"white"}}},e.key)))}),(0,f.jsx)(b.A,{sx:{mb:2}})]}),(0,f.jsx)(g.A,{container:!0,spacing:2,children:w.map((e=>(0,f.jsx)(g.A,{item:!0,xs:12,sm:6,md:4,children:S(e)},e.key)))}),F()>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(b.A,{sx:{my:2}}),(0,f.jsx)(u.A,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Active Filters"}),(0,f.jsx)(i.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:Object.entries(l).map((e=>{let[t,l]=e;if(Array.isArray(l)&&0===l.length)return null;if(!l||""===l)return null;const o=w.find((e=>e.key===t));if(!o)return null;let r=l;if(Array.isArray(l))r=l.map((e=>{var t;const l=null===(t=o.options)||void 0===t?void 0:t.find((t=>t.value===e));return l?l.label:e})).join(", ");else if(o.options){const e=o.options.find((e=>e.value===l));r=e?e.label:l}else l instanceof Date&&(r=l.toLocaleDateString());return(0,f.jsx)(c.A,{label:"".concat(o.label,": ").concat(r),onDelete:()=>(e=>{y(e,"")})(t),color:"primary",variant:"outlined",size:"small"},t)})).filter(Boolean)})]})]})})}},82327:(e,t,l)=>{l.d(t,{A:()=>n});var o=l(99992),r=l(70579);const n=(0,o.A)((0,r.jsx)("path",{d:"M14.4 6 14 4H5v17h2v-7h5.6l.4 2h7V6z"}),"Flag")},87186:(e,t,l)=>{l.d(t,{A:()=>n});var o=l(99992),r=l(70579);const n=(0,o.A)((0,r.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow")},93201:(e,t,l)=>{l.d(t,{A:()=>n});var o=l(99992),r=l(70579);const n=(0,o.A)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle")}}]);
//# sourceMappingURL=632.87f12508.chunk.js.map